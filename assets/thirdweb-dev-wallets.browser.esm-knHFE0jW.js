const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/thirdweb-dev-wallets-evm-connectors-blocto.browser.esm-DJyiX4IC.js","assets/index-BFJltGNr.js","assets/index-BK-I7xHM.css","assets/url-a45219bd.browser.esm-C-tYPgKg.js","assets/blocto-sdk.module-Bb5zf6Hs.js","assets/normalizeChainId-1fb9aedf.browser.esm-Dulsj_Qd.js","assets/thirdweb-dev-wallets-evm-connectors-embedded-wallet.browser.esm-B2di71GI.js","assets/index-C-NWtsoG.js","assets/thirdweb-dev-wallets-evm-connectors-okx.browser.esm-PUyrpLJE.js","assets/thirdweb-dev-wallets-evm-connectors-injected.browser.esm-C4ICzcC4.js","assets/thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js","assets/thirdweb-dev-wallets-evm-connectors-core-wallet.browser.esm-CNF7DJWh.js","assets/thirdweb-dev-wallets-evm-connectors-onekey.browser.esm-CLC7wFCJ.js","assets/thirdweb-dev-wallets-evm-connectors-crypto-defi-wallet.browser.esm-CKo9REXn.js","assets/thirdweb-dev-wallets-evm-connectors-rabby.browser.esm-eOyp8bVR.js","assets/thirdweb-dev-wallets-evm-connectors-coin98.browser.esm-mnHEKS4c.js","assets/thirdweb-dev-wallets-evm-connectors-paper.browser.esm-DDNSMSr2.js","assets/index-buUMaeMm.js","assets/thirdweb-dev-wallets-evm-connectors-frame.browser.esm-Bh7cpLBV.js","assets/thirdweb-dev-wallets-evm-connectors-imtoken.browser.esm-D3iwC2o4.js","assets/thirdweb-dev-wallets-evm-connectors-local-wallet.browser.esm-uFyeoIAw.js","assets/thirdweb-dev-wallets-evm-connectors-magic.browser.esm-D0t7GYZm.js","assets/index-jSVtmSJf.js","assets/thirdweb-dev-wallets-evm-connectors-xdefi.browser.esm-Y6xqbmJO.js","assets/thirdweb-dev-wallets-evm-connectors-safe.browser.esm-cEpQtbTM.js","assets/index-Sj85tfdV.js","assets/index-DbtPk64p.js","assets/index-HBOtwn9K.js","assets/index-D1N-xh7N.js","assets/zk-connector-fada2157.browser.esm-2YcbaQVf.js","assets/http-rpc-client-0a079e80.browser.esm-DCbIavkR.js","assets/thirdweb-dev-wallets-evm-connectors-smart-wallet.browser.esm-Cr7ASJsj.js","assets/thirdweb-dev-wallets-evm-connectors-token-bound-smart-wallet.browser.esm-C9nBon38.js","assets/thirdweb-dev-wallets-evm-connectors-magic-eden.browser.esm-Cr3wsGXy.js"])))=>i.map(i=>d[i]);
import{g as Te,s as Ce,S as Ee,c as De,C as fe,h as oe,_ as r,w as p,A as y,u as b,a as o,W as u,b as K,d as X,e as w,T as M,f as ce,i as ne,r as Le,j as A,k as ie,l as Ne,m as Ae,n as _e,o as be,p as Se,q as ve,t as je,v as Oe,x as We,D as ze,y as Pe,M as Ue,z as Re,B as xe,E as ke,F as Qe,G as Ge,H as Be,P as Ve,R as Ye,I as qe,J as Fe,Z as Ze}from"./index-BFJltGNr.js";import{i as Ke,W as He,A as Je,C as Xe,P as $e,S as et,U as tt}from"./url-a45219bd.browser.esm-C-tYPgKg.js";import{n as nt}from"./normalizeChainId-1fb9aedf.browser.esm-Dulsj_Qd.js";import{o as it}from"./index-C-NWtsoG.js";const at=["function isValidSignature(bytes32 _hash, bytes _signature) public view returns (bytes4)"],rt="0x1626ba7e";async function le(a,e,t,n,i,s){let l=!1;typeof globalThis<"u"&&"TW_SKIP_FETCH_SETUP"in globalThis&&typeof globalThis.TW_SKIP_FETCH_SETUP=="boolean"&&(l=globalThis.TW_SKIP_FETCH_SETUP);const c=De(n,i),d={};if(Ke(c)){const I=typeof globalThis<"u"&&"APP_BUNDLE_ID"in globalThis?globalThis.APP_BUNDLE_ID:void 0;s?d["x-secret-key"]=s:i&&(d["x-client-id"]=i,I&&(d["x-bundle-id"]=I)),typeof globalThis<"u"&&"TW_AUTH_TOKEN"in globalThis&&typeof globalThis.TW_AUTH_TOKEN=="string"&&(d.authorization=`Bearer ${globalThis.TW_AUTH_TOKEN}`),typeof globalThis<"u"&&"TW_CLI_AUTH_TOKEN"in globalThis&&typeof globalThis.TW_CLI_AUTH_TOKEN=="string"&&(d.authorization=`Bearer ${globalThis.TW_CLI_AUTH_TOKEN}`,d["x-authorize-wallet"]="true"),Ce(d)}const g=new Ee({url:c,skipFetchSetup:l,headers:d},n),h=new fe(t,at,g);try{return await h.isValidSignature(oe(a),e)===rt}catch{return!1}}const Lt="0x5FF137D4b0FDCD49DcA30c7CF57E578a026d2789",st="0x02101dfB77FDE026414827Fdc604ddAF224F0921",Nt=5e4,ot="0x85e23b94e7F5E9cC1fF78BCe78cfb15B81f0DF00",At=[{type:"constructor",inputs:[{name:"_entrypoint",type:"address",internalType:"contract IEntryPoint"},{name:"_factory",type:"address",internalType:"address"}],stateMutability:"nonpayable"},{type:"receive",stateMutability:"payable"},{type:"function",name:"addDeposit",inputs:[],outputs:[],stateMutability:"payable"},{type:"function",name:"contractURI",inputs:[],outputs:[{name:"",type:"string",internalType:"string"}],stateMutability:"view"},{type:"function",name:"entryPoint",inputs:[],outputs:[{name:"",type:"address",internalType:"contract IEntryPoint"}],stateMutability:"view"},{type:"function",name:"execute",inputs:[{name:"_target",type:"address",internalType:"address"},{name:"_value",type:"uint256",internalType:"uint256"},{name:"_calldata",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"executeBatch",inputs:[{name:"_target",type:"address[]",internalType:"address[]"},{name:"_value",type:"uint256[]",internalType:"uint256[]"},{name:"_calldata",type:"bytes[]",internalType:"bytes[]"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"factory",inputs:[],outputs:[{name:"",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"getAllActiveSigners",inputs:[],outputs:[{name:"signers",type:"tuple[]",internalType:"struct IAccountPermissions.SignerPermissions[]",components:[{name:"signer",type:"address",internalType:"address"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"startTimestamp",type:"uint128",internalType:"uint128"},{name:"endTimestamp",type:"uint128",internalType:"uint128"}]}],stateMutability:"view"},{type:"function",name:"getAllAdmins",inputs:[],outputs:[{name:"",type:"address[]",internalType:"address[]"}],stateMutability:"view"},{type:"function",name:"getAllSigners",inputs:[],outputs:[{name:"signers",type:"tuple[]",internalType:"struct IAccountPermissions.SignerPermissions[]",components:[{name:"signer",type:"address",internalType:"address"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"startTimestamp",type:"uint128",internalType:"uint128"},{name:"endTimestamp",type:"uint128",internalType:"uint128"}]}],stateMutability:"view"},{type:"function",name:"getMessageHash",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"}],outputs:[{name:"",type:"bytes32",internalType:"bytes32"}],stateMutability:"view"},{type:"function",name:"getNonce",inputs:[],outputs:[{name:"",type:"uint256",internalType:"uint256"}],stateMutability:"view"},{type:"function",name:"getPermissionsForSigner",inputs:[{name:"signer",type:"address",internalType:"address"}],outputs:[{name:"",type:"tuple",internalType:"struct IAccountPermissions.SignerPermissions",components:[{name:"signer",type:"address",internalType:"address"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"startTimestamp",type:"uint128",internalType:"uint128"},{name:"endTimestamp",type:"uint128",internalType:"uint128"}]}],stateMutability:"view"},{type:"function",name:"initialize",inputs:[{name:"_defaultAdmin",type:"address",internalType:"address"},{name:"_data",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"isActiveSigner",inputs:[{name:"signer",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isAdmin",inputs:[{name:"_account",type:"address",internalType:"address"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"isValidSignature",inputs:[{name:"_hash",type:"bytes32",internalType:"bytes32"},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"magicValue",type:"bytes4",internalType:"bytes4"}],stateMutability:"view"},{type:"function",name:"isValidSigner",inputs:[{name:"_signer",type:"address",internalType:"address"},{name:"_userOp",type:"tuple",internalType:"struct UserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"callGasLimit",type:"uint256",internalType:"uint256"},{name:"verificationGasLimit",type:"uint256",internalType:"uint256"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"maxFeePerGas",type:"uint256",internalType:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256",internalType:"uint256"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"multicall",inputs:[{name:"data",type:"bytes[]",internalType:"bytes[]"}],outputs:[{name:"results",type:"bytes[]",internalType:"bytes[]"}],stateMutability:"nonpayable"},{type:"function",name:"onERC1155BatchReceived",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"uint256[]",internalType:"uint256[]"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"onERC1155Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"onERC721Received",inputs:[{name:"",type:"address",internalType:"address"},{name:"",type:"address",internalType:"address"},{name:"",type:"uint256",internalType:"uint256"},{name:"",type:"bytes",internalType:"bytes"}],outputs:[{name:"",type:"bytes4",internalType:"bytes4"}],stateMutability:"nonpayable"},{type:"function",name:"setContractURI",inputs:[{name:"_uri",type:"string",internalType:"string"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setEntrypointOverride",inputs:[{name:"_entrypointOverride",type:"address",internalType:"contract IEntryPoint"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"setPermissionsForSigner",inputs:[{name:"_req",type:"tuple",internalType:"struct IAccountPermissions.SignerPermissionRequest",components:[{name:"signer",type:"address",internalType:"address"},{name:"isAdmin",type:"uint8",internalType:"uint8"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"permissionStartTimestamp",type:"uint128",internalType:"uint128"},{name:"permissionEndTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128",internalType:"uint128"},{name:"uid",type:"bytes32",internalType:"bytes32"}]},{name:"_signature",type:"bytes",internalType:"bytes"}],outputs:[],stateMutability:"nonpayable"},{type:"function",name:"supportsInterface",inputs:[{name:"interfaceId",type:"bytes4",internalType:"bytes4"}],outputs:[{name:"",type:"bool",internalType:"bool"}],stateMutability:"view"},{type:"function",name:"validateUserOp",inputs:[{name:"userOp",type:"tuple",internalType:"struct UserOperation",components:[{name:"sender",type:"address",internalType:"address"},{name:"nonce",type:"uint256",internalType:"uint256"},{name:"initCode",type:"bytes",internalType:"bytes"},{name:"callData",type:"bytes",internalType:"bytes"},{name:"callGasLimit",type:"uint256",internalType:"uint256"},{name:"verificationGasLimit",type:"uint256",internalType:"uint256"},{name:"preVerificationGas",type:"uint256",internalType:"uint256"},{name:"maxFeePerGas",type:"uint256",internalType:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256",internalType:"uint256"},{name:"paymasterAndData",type:"bytes",internalType:"bytes"},{name:"signature",type:"bytes",internalType:"bytes"}]},{name:"userOpHash",type:"bytes32",internalType:"bytes32"},{name:"missingAccountFunds",type:"uint256",internalType:"uint256"}],outputs:[{name:"validationData",type:"uint256",internalType:"uint256"}],stateMutability:"nonpayable"},{type:"function",name:"verifySignerPermissionRequest",inputs:[{name:"req",type:"tuple",internalType:"struct IAccountPermissions.SignerPermissionRequest",components:[{name:"signer",type:"address",internalType:"address"},{name:"isAdmin",type:"uint8",internalType:"uint8"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"permissionStartTimestamp",type:"uint128",internalType:"uint128"},{name:"permissionEndTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128",internalType:"uint128"},{name:"uid",type:"bytes32",internalType:"bytes32"}]},{name:"signature",type:"bytes",internalType:"bytes"}],outputs:[{name:"success",type:"bool",internalType:"bool"},{name:"signer",type:"address",internalType:"address"}],stateMutability:"view"},{type:"function",name:"withdrawDepositTo",inputs:[{name:"withdrawAddress",type:"address",internalType:"address payable"},{name:"amount",type:"uint256",internalType:"uint256"}],outputs:[],stateMutability:"nonpayable"},{type:"event",name:"AdminUpdated",inputs:[{name:"signer",type:"address",indexed:!0,internalType:"address"},{name:"isAdmin",type:"bool",indexed:!1,internalType:"bool"}],anonymous:!1},{type:"event",name:"ContractURIUpdated",inputs:[{name:"prevURI",type:"string",indexed:!1,internalType:"string"},{name:"newURI",type:"string",indexed:!1,internalType:"string"}],anonymous:!1},{type:"event",name:"Initialized",inputs:[{name:"version",type:"uint8",indexed:!1,internalType:"uint8"}],anonymous:!1},{type:"event",name:"SignerPermissionsUpdated",inputs:[{name:"authorizingSigner",type:"address",indexed:!0,internalType:"address"},{name:"targetSigner",type:"address",indexed:!0,internalType:"address"},{name:"permissions",type:"tuple",indexed:!1,internalType:"struct IAccountPermissions.SignerPermissionRequest",components:[{name:"signer",type:"address",internalType:"address"},{name:"isAdmin",type:"uint8",internalType:"uint8"},{name:"approvedTargets",type:"address[]",internalType:"address[]"},{name:"nativeTokenLimitPerTransaction",type:"uint256",internalType:"uint256"},{name:"permissionStartTimestamp",type:"uint128",internalType:"uint128"},{name:"permissionEndTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityStartTimestamp",type:"uint128",internalType:"uint128"},{name:"reqValidityEndTimestamp",type:"uint128",internalType:"uint128"},{name:"uid",type:"bytes32",internalType:"bytes32"}]}],anonymous:!1}];async function H(a,e,t){const i=(await Te(a,{clientId:e,secretKey:t}).getNetwork()).chainId;return i===324||i===300||i===302}class C extends y{constructor(e){e?.chain&&e.clientId&&(e.chain=b(e.chain,e.clientId)),super(C.id,e),r(this,"name","Blocto")}async initConnector(){const{BloctoConnector:e}=await o(async()=>{const{BloctoConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-blocto.browser.esm-DJyiX4IC.js");return{BloctoConnector:n}},__vite__mapDeps([0,1,2,3,4,5])),t=new e({chains:this.chains,options:{appId:this.options?.appId,chainId:this.options?.chain?.chainId}});return this.connector=new u(t),this.connector}async getConnector(){return this.connector?Promise.resolve(this.connector):await this.initConnector()}}r(C,"id",p.blocto);r(C,"meta",{name:"Blocto",iconURL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyMzNfMjM4NykiPgo8cmVjdCB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHJ4PSIxMiIgZmlsbD0id2hpdGUiLz4KPHBhdGggZD0iTTMyLjkwMjggMTguMzA2M0MyOC4zOTExIDE4LjMwNjMgMjMuOTg3MyAyMC4wNDU5IDIwLjY5NTIgMjMuMTMxOUMxNy4wODQzIDI2LjUxNzYgMTQuNzk5MiAzMS41MTc3IDEzLjQ4OTMgMzYuMjIxMkMxMi42MzE0IDM5LjI5OTIgMTIuMjAxNiA0Mi40OTE1IDEyLjIwMTYgNDUuNjg1M0MxMi4yMDE2IDQ2LjY1MTEgMTIuMjQxMiA0Ny42MDg5IDEyLjMxNzQgNDguNTU1NkMxMi40MTA5IDQ5LjcwNjkgMTMuNTMyMSA1MC41MDQ2IDE0LjY0ODUgNTAuMjAzM0MxNS42MjIyIDQ5Ljk0MTYgMTYuNjQ2NiA0OS44MDA1IDE3LjcwMjggNDkuODAwNUMxOS44NzIyIDQ5LjgwMDUgMjEuOTA1MiA1MC4zOTA0IDIzLjY0OCA1MS40MjEyQzIzLjY5MDggNTEuNDQ2NiAyMy43MzIgNTEuNDcxOSAyMy43NzQ4IDUxLjQ5NTdDMjYuNjA3MSA1My4xODQ2IDI5Ljk0ODQgNTQuMTEyMyAzMy41MTE3IDUzLjk5MzRDNDIuODA2MiA1My42ODU3IDUwLjM5OSA0Ni4xMjMgNTAuNzQxNiAzNi44MzAxQzUxLjExNTggMjYuNjYzNSA0Mi45ODY5IDE4LjMwNDcgMzIuOTA0NCAxOC4zMDQ3TDMyLjkwMjggMTguMzA2M1pNMzIuOTAyOCA0NC4zMTJDMjguMzk3NSA0NC4zMTIgMjQuNzQ1NCA0MC42NTk5IDI0Ljc0NTQgMzYuMTU2MkMyNC43NDU0IDMxLjY1MjUgMjguMzk3NSAyNy45OTg3IDMyLjkwMjggMjcuOTk4N0MzNy40MDgxIDI3Ljk5ODcgNDEuMDYwMiAzMS42NTA5IDQxLjA2MDIgMzYuMTU2MkM0MS4wNjAyIDQwLjY2MTQgMzcuNDA4MSA0NC4zMTIgMzIuOTAyOCA0NC4zMTJaIiBmaWxsPSIjMTRBQUZGIi8+CjxwYXRoIGQ9Ik0yNS41NjM2IDEyLjY4MjZDMjUuNTYzNiAxNS4wMzQ0IDI0LjMzMTUgMTcuMjE2NCAyMi4zMDggMTguNDE1M0MyMS4wMzc3IDE5LjE2ODYgMTkuODQ2OCAyMC4wNTgyIDE4Ljc2ODQgMjEuMDcxNUMxNi4zNzU1IDIzLjMxMzkgMTQuNTg5OCAyNi4wNjUzIDEzLjI2NzMgMjguNzkyOUMxMy4wMDcyIDI5LjMzMDQgMTIuMiAyOS4xNDAyIDEyLjIgMjguNTQyM1YxMi42ODI2QzEyLjIgOC45OTI0MiAxNS4xOTI0IDYgMTguODgyNiA2QzIyLjU3MjggNiAyNS41NjUyIDguOTkyNDIgMjUuNTY1MiAxMi42ODI2SDI1LjU2MzZaIiBmaWxsPSIjMDA3NUZGIi8+CjwvZz4KPGRlZnM+CjxjbGlwUGF0aCBpZD0iY2xpcDBfMjIzM18yMzg3Ij4KPHJlY3Qgd2lkdGg9IjYwIiBoZWlnaHQ9IjYwIiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=",urls:{android:"https://play.google.com/store/apps/details?id=com.portto.blocto",ios:"https://apps.apple.com/app/blocto/id1481181682"}});let W=class S extends y{static async sendVerificationEmail(e){return new S({chain:K,clientId:e.clientId}).sendVerificationEmail({email:e.email})}static async sendVerificationSms(e){return new S({chain:K,clientId:e.clientId}).sendVerificationSms({phoneNumber:e.phoneNumber})}get walletName(){return"Embedded Wallet"}constructor(e){super(S.id,{...e});try{this.chain={...e.chain,rpc:X(e.chain,e.clientId)}}catch{this.chain=e.chain}}async getConnector(){if(!this.connector){const{EmbeddedWalletConnector:e}=await o(async()=>{const{EmbeddedWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-embedded-wallet.browser.esm-B2di71GI.js");return{EmbeddedWalletConnector:t}},__vite__mapDeps([6,1,2,5,3,7]));this.connector=new e({clientId:this.options?.clientId??"",chain:this.chain,chains:this.chains,onAuthSuccess:this.options?.onAuthSuccess})}return this.connector}autoConnect(e){if(!e)throw new Error("Can't autoconnect embedded wallet");return this.connect(e)}getConnectParams(){const e=super.getConnectParams();if(e)return{chainId:e.chainId,authResult:{user:e.authResult.user}}}async getEmail(){return(await this.getConnector()).getEmail()}async getPhoneNumber(){return(await this.getConnector()).getPhoneNumber()}async getEmbeddedWalletSDK(){return(await this.getConnector()).getEmbeddedWalletSDK()}async getRecoveryInformation(){return(await this.getConnector()).getRecoveryInformation()}async sendVerificationEmail(e){const{email:t}=e;return(await this.getConnector()).sendVerificationEmail({email:t})}async sendVerificationSms(e){const{phoneNumber:t}=e;return(await this.getConnector()).sendVerificationSms({phoneNumber:t})}async authenticate(e){const n=(await this.getConnector()).authenticate(e);try{await this.walletStorage.setItem(ae,e.strategy)}catch{}return n}async getLastUsedAuthStrategy(){try{return await this.walletStorage.getItem(ae)}catch{return null}}connect(e){return super.connect(e)}};r(W,"id",p.embeddedWallet);r(W,"meta",{name:"Embedded Wallet",iconURL:"ipfs://QmNx2evQa6tcQs9VTd3YaDm31ckfStvgRGKFGELahUmrbV/emailIcon.svg"});const ae="lastUsedAuthStrategy";function de(){if(globalThis.window&&globalThis.window.xfi&&globalThis.window.xfi.ethereum)return globalThis.window.xfi.ethereum}function ue(){if(w(globalThis.window)&&globalThis.window.ethereum&&window.okxwallet)return window.okxwallet}class P extends y{get walletName(){return"OKX"}constructor(e){super(P.id,e),this.isInjected=!!ue()}async getConnector(){if(!this.connector)if(this.isInjected){const{OKXConnector:e}=await o(async()=>{const{OKXConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-okx.browser.esm-PUyrpLJE.js");return{OKXConnector:t}},__vite__mapDeps([8,1,2,3,9,5,7]));this.OKXConnector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.OKXConnector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(P,"id",p.okx);function pe(){if(w(globalThis.window)&&globalThis.window.ethereum&&window.avalanche)return window.avalanche}class U extends y{get walletName(){return"Core wallet"}constructor(e){super(U.id,e),this.isInjected=!!pe()}async getConnector(){if(!this.connector)if(this.isInjected){const{CoreWalletConnector:e}=await o(async()=>{const{CoreWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-core-wallet.browser.esm-CNF7DJWh.js");return{CoreWalletConnector:t}},__vite__mapDeps([11,1,2,3,9,5,7]));this.CoreWalletConnector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.CoreWalletConnector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(U,"id",p.coreWallet);function ye(){if(w(globalThis.window)&&globalThis.window.$onekey&&globalThis.window.$onekey.ethereum)return globalThis.window.$onekey.ethereum}class R extends y{get walletName(){return"OneKey wallet"}constructor(e){super(R.id,e),this.isInjected=!!ye()}async getConnector(){if(!this.connector)if(this.isInjected){const{OneKeyConnector:e}=await o(async()=>{const{OneKeyConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-onekey.browser.esm-CLC7wFCJ.js");return{OneKeyConnector:t}},__vite__mapDeps([12,1,2,3,9,5,7]));this.OneKeyConnector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.OneKeyConnector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(R,"id",p.oneKey);function he(){if(w(globalThis.window)&&globalThis.window.ethereum&&window.deficonnectProvider)return window.deficonnectProvider}class x extends y{get walletName(){return"Crypto Defi wallet"}constructor(e){super(x.id,e),this.isInjected=!!he()}async getConnector(){if(!this.connector)if(this.isInjected){const{CryptoDefiWalletConnector:e}=await o(async()=>{const{CryptoDefiWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-crypto-defi-wallet.browser.esm-CKo9REXn.js");return{CryptoDefiWalletConnector:t}},__vite__mapDeps([13,1,2,3,9,5,7]));this.CryptoDefiWalletConnector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.CryptoDefiWalletConnector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(x,"id",p.cryptoDefiWallet);function ge(){if(w(globalThis.window)&&globalThis.window.ethereum&&window.rabby)return window.rabby}class k extends y{get walletName(){return"Rabby wallet"}constructor(e){super(k.id,e),this.isInjected=!!ge()}async getConnector(){if(!this.connector)if(this.isInjected){const{RabbyConnector:e}=await o(async()=>{const{RabbyConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-rabby.browser.esm-eOyp8bVR.js");return{RabbyConnector:t}},__vite__mapDeps([14,1,2,3,9,5,7]));this.RabbyConnector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.RabbyConnector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(k,"id",p.rabby);function me(){if(w(globalThis.window)&&window.coin98)return window.ethereum}class Q extends y{get walletName(){return"Coin98 wallet"}constructor(e){super(Q.id,e),this.isInjected=!!me()}async getConnector(){if(!this.connector)if(this.isInjected){const{Coin98Connector:e}=await o(async()=>{const{Coin98Connector:t}=await import("./thirdweb-dev-wallets-evm-connectors-coin98.browser.esm-mnHEKS4c.js");return{Coin98Connector:t}},__vite__mapDeps([15,1,2,3,9,5,7]));this.Coin98Connector=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}),this.connector=new u(this.Coin98Connector)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(Q,"id",p.coin98);function we(){if(globalThis.window&&globalThis.window.magicEden&&globalThis.window.magicEden.ethereum)return globalThis.window.magicEden.ethereum}class E extends y{get walletName(){return"Paper Wallet"}constructor(e){super(E.id,{...e});try{this.chain={...e.chain,rpc:X(e.chain,e.clientId)}}catch{this.chain=e.chain}if(e.paperClientId&&e.paperClientId==="uninitialized"){this.paperClientId="00000000-0000-0000-0000-000000000000";return}if(e.advancedOptions&&e.advancedOptions?.recoveryShareManagement==="USER_MANAGED"&&(e.paperClientId&&!this.isClientIdLegacyPaper(e.paperClientId)||!e.paperClientId&&e.clientId&&!this.isClientIdLegacyPaper(e.clientId)))throw new Error('RecoveryShareManagement option "USER_MANAGED" is not supported with thirdweb client ID');if(!e.clientId&&!e.paperClientId)throw new Error("clientId or paperClientId is required");if(e.paperClientId&&!this.isClientIdLegacyPaper(e.paperClientId))throw new Error("paperClientId must be a legacy paper client ID");if(e.clientId&&this.isClientIdLegacyPaper(e.clientId))throw new Error("clientId must be a thirdweb client ID");this.paperClientId=e.paperClientId??e.clientId,this.onAuthSuccess=e.onAuthSuccess}isClientIdLegacyPaper(e){return e.indexOf("-")>0&&e.length===36}async getConnector(){if(!this.connector){const{PaperWalletConnector:e}=await o(async()=>{const{PaperWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-paper.browser.esm-DDNSMSr2.js");return{PaperWalletConnector:t}},__vite__mapDeps([16,1,2,17,7,5]));this.connector=new e({clientId:this.paperClientId,chain:this.chain,chains:this.chains,onAuthSuccess:this.onAuthSuccess,advancedOptions:{recoveryShareManagement:this.options?.advancedOptions?.recoveryShareManagement},styles:this.options?.styles})}return this.connector}getConnectParams(){const e=super.getConnectParams();if(e)return typeof e.googleLogin=="object"?{...e,googleLogin:!0}:e}async getEmail(){return(await this.getConnector()).getEmail()}async getPaperSDK(){return(await this.getConnector()).getPaperSDK()}}r(E,"id",p.paper);r(E,"meta",{name:"Paper Wallet",iconURL:"ipfs://QmNrLXtPoFrh4yjZbXui39zUMozS1oetpgU8dvZhFAxfRa/paper-logo-icon.svg"});class G extends y{get walletName(){return"Frame Wallet"}constructor(e){super(G.id,e)}async getConnector(){if(!this.connector){const{FrameConnector:e}=await o(async()=>{const{FrameConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-frame.browser.esm-Bh7cpLBV.js");return{FrameConnector:t}},__vite__mapDeps([18,1,2,3,5]));this.connector=new u(new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}))}return this.connector}}r(G,"id",p.frame);class D extends y{get walletName(){return"imToken"}constructor(e){super(D.id,e),w(globalThis.window)?this.isInjected=!!globalThis.window.ethereum?.isImToken:this.isInjected=!1}async getConnector(){if(!this.connector)if(this.isInjected){const{ImTokenConnector:e}=await o(async()=>{const{ImTokenConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-imtoken.browser.esm-D3iwC2o4.js");return{ImTokenConnector:n}},__vite__mapDeps([19,9,1,2,3,5])),t=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}});this.imtokenConnector=t,this.connector=new u(t)}else{const{WalletConnectConnector:e}=await o(async()=>{const{WalletConnectConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-wallet-connect.browser.esm-DPYhWR06.js");return{WalletConnectConnector:n}},__vite__mapDeps([10,1,2,3])),t=new e({chains:this.chains,options:{projectId:this.options?.projectId||M,storage:this.walletStorage,qrcode:this.options?.qrcode,dappMetadata:this.dappMetadata,qrModalOptions:this.options?.qrModalOptions}});t.getProvider().then(n=>{n.signer.client.on("session_request_sent",()=>{this.emit("wc_session_request_sent")})}),this.walletConnectConnector=t,this.connector=new u(t)}return this.connector}async connectWithQrCode(e){await this.getConnector();const t=this.walletConnectConnector;if(!t)throw new Error("WalletConnect connector not found");(await t.getProvider()).on("display_uri",i=>{e.onQrCodeUri(i)}),this.connect({chainId:e.chainId}).then(e.onConnected)}}r(D,"meta",{name:"imToken",iconURL:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODAiIGhlaWdodD0iODAiIHZpZXdCb3g9IjAgMCA4MCA4MCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzIyMl80NzgzKSI+CjxtYXNrIGlkPSJtYXNrMF8yMjJfNDc4MyIgc3R5bGU9Im1hc2stdHlwZTpsdW1pbmFuY2UiIG1hc2tVbml0cz0idXNlclNwYWNlT25Vc2UiIHg9IjAiIHk9IjAiIHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCI+CjxwYXRoIGQ9Ik03OS44OTQ4IDBIMC4wNTA3ODEyVjgwSDc5Ljg5NDhWMFoiIGZpbGw9IndoaXRlIi8+CjwvbWFzaz4KPGcgbWFzaz0idXJsKCNtYXNrMF8yMjJfNDc4MykiPgo8cGF0aCBkPSJNNjIuMDI3NSAwSDE4LjA1MDlDOC4xNDYzOSAwIDAuMTE3MTg4IDguMDQ0ODggMC4xMTcxODggMTcuOTY4OFY2Mi4wMzEyQzAuMTE3MTg4IDcxLjk1NTEgOC4xNDYzOSA4MCAxOC4wNTA5IDgwSDYyLjAyNzVDNzEuOTMyIDgwIDc5Ljk2MTIgNzEuOTU1MSA3OS45NjEyIDYyLjAzMTJWMTcuOTY4OEM3OS45NjEyIDguMDQ0ODggNzEuOTMyIDAgNjIuMDI3NSAwWiIgZmlsbD0idXJsKCNwYWludDBfbGluZWFyXzIyMl80NzgzKSIvPgo8cGF0aCBkPSJNNjUuMDk4MSAyNC43MzNDNjYuNzU4NiA0Ny4yNjY3IDUyLjMwMjEgNTcuOTE3MiAzOS4zNDIzIDU5LjA1M0MyNy4yOTM1IDYwLjEwODcgMTUuOTUyIDUyLjY5MDggMTQuOTU3MSA0MS4yOTM2QzE0LjEzNjMgMzEuODc3NiAxOS45NDQ1IDI3Ljg2ODkgMjQuNTA4IDI3LjQ2OTRDMjkuMjAxNSAyNy4wNTcgMzMuMTQ1OCAzMC4zMDAxIDMzLjQ4NzkgMzQuMjI2OUMzMy44MTc1IDM4LjAwMiAzMS40NjY0IDM5LjcyMDUgMjkuODMxMyAzOS44NjM0QzI4LjUzODIgMzkuOTc3IDI2LjkxMTQgMzkuMTkwNSAyNi43NjQ1IDM3LjUwMTZDMjYuNjM4NSAzNi4wNTAzIDI3LjE4ODUgMzUuODUyNiAyNy4wNTQxIDM0LjMxMDlDMjYuODE0OSAzMS41NjYyIDI0LjQyNjEgMzEuMjQ2NiAyMy4xMTgzIDMxLjM2MDFDMjEuNTM1NyAzMS40OTkxIDE4LjY2NDEgMzMuMzQ5OCAxOS4wNjcgMzcuOTZDMTkuNDcyMiA0Mi42MTAxIDIzLjkyMjIgNDYuMjg0NSAyOS43NTU3IDQ1Ljc3MzRDMzYuMDUwOSA0NS4yMjIzIDQwLjQzMzcgNDAuMzExNCA0MC43NjM0IDMzLjQyMzRDNDAuNzYwMyAzMy4wNTg2IDQwLjgzNyAzMi42OTc1IDQwLjk4OCAzMi4zNjU1TDQwLjk5IDMyLjM1NzJDNDEuMDU3OCAzMi4yMTI4IDQxLjEzNzIgMzIuMDc0MiA0MS4yMjcyIDMxLjk0MjhDNDEuMzYxNiAzMS43NDA5IDQxLjUzMzggMzEuNTE4IDQxLjc1NjIgMzEuMjczOUM0MS43NTgzIDMxLjI2NzYgNDEuNzU4MyAzMS4yNjc2IDQxLjc2MjYgMzEuMjY3NkM0MS45MjQxIDMxLjA4NDcgNDIuMTE5NCAzMC44ODcgNDIuMzM5NyAzMC42NzQ1QzQ1LjA4OTcgMjguMDc1IDU0Ljk5MzEgMjEuOTQ0MiA2NC4zNTkyIDIzLjg4NTVDNjQuNTU3MyAyMy45MjggNjQuNzM2MSAyNC4wMzM0IDY0Ljg2OTMgMjQuMTg2MkM2NS4wMDI1IDI0LjMzOTEgNjUuMDgyNiAyNC41MzA4IDY1LjA5ODEgMjQuNzMzWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8L2c+CjxkZWZzPgo8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMjIyXzQ3ODMiIHgxPSI3My41MDA5IiB5MT0iNS4zMTI1IiB4Mj0iMi44NzI0MSIgeTI9Ijc3LjY3NDciIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KPHN0b3Agc3RvcC1jb2xvcj0iIzExQzREMSIvPgo8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiMwMDYyQUQiLz4KPC9saW5lYXJHcmFkaWVudD4KPGNsaXBQYXRoIGlkPSJjbGlwMF8yMjJfNDc4MyI+CjxyZWN0IHdpZHRoPSI4MCIgaGVpZ2h0PSI4MCIgZmlsbD0id2hpdGUiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4=",urls:{ios:"https://itunes.apple.com/us/app/imtoken2/id1384798940",android:"https://play.google.com/store/apps/details?id=im.token.app"}});r(D,"id",p.imtoken);class B extends y{get walletName(){return"Injected Wallet"}constructor(e){super(B.id,e)}async getConnector(){if(!this.connector){const{InjectedConnector:e}=await o(async()=>{const{InjectedConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-injected.browser.esm-C4ICzcC4.js");return{InjectedConnector:t}},__vite__mapDeps([9,1,2,3,5]));this.connector=new u(new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}}))}return this.connector}}r(B,"id","injected");const q="localWalletData";class f extends y{get walletName(){return"Local Wallet"}constructor(e){super(f.id,e),e?.chain&&e.clientId&&(e.chain=b(e.chain,e.clientId)),this.options=e||{},this._storage=e?.storage||ce(p.localWallet)}async getConnector(){if(!this.connector){const{LocalWalletConnector:e}=await o(async()=>{const{LocalWalletConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-local-wallet.browser.esm-uFyeoIAw.js");return{LocalWalletConnector:n}},__vite__mapDeps([20,1,2,5]));if(!this.ethersWallet)throw new Error("wallet is not initialized");const t=(this.options.chain?[...ne,this.options.chain]:ne).map(n=>b(n,this.options.clientId));this.connector=new e({chain:this.options.chain||b(K,this.options.clientId),ethersWallet:this.ethersWallet,chains:this.chains||t,clientId:this.options.clientId,secretKey:this.options.secretKey})}return this.connector}async loadOrCreate(e){await this.getSavedData(e.storage)?await this.load(e):(await this.generate(),await this.save(e))}async generate(){if(this.ethersWallet)throw new Error("wallet is already initialized");const e=Le(32);return this.ethersWallet=new A(e),this.ethersWallet.address}async import(e){if(this.ethersWallet)throw new Error("wallet is already initialized");if("encryptedJson"in e)return this.ethersWallet=await A.fromEncryptedJson(e.encryptedJson,e.password),this.ethersWallet.address;if("privateKey"in e){if(!e.encryption&&!J(e.privateKey))throw new Error("invalid private key");const t=await re(e.encryption)(e.privateKey);if(e.encryption&&(t===""||!J(t)))throw new Error("invalid password");return this.ethersWallet=new A(t),this.ethersWallet.address}if("mnemonic"in e){if(!e.encryption&&!ie(e.mnemonic))throw new Error("invalid mnemonic");const t=await re(e.encryption)(e.mnemonic);if(e.encryption&&(t===""||!ie(t)))throw new Error("invalid password");return this.ethersWallet=A.fromMnemonic(t),this.ethersWallet.address}throw new Error("invalid import strategy")}async load(e){if(this.ethersWallet)throw new Error("wallet is already initialized");const t=await this.getSavedData(e.storage);if(!t)throw new Error("No Saved wallet found in storage");if(t.strategy!==e.strategy)throw new Error(`Saved wallet data is not ${e.strategy}, it is ${t.strategy}`);if(e.strategy==="encryptedJson")return this.import({encryptedJson:t.data,password:e.password});if(t.isEncrypted&&!e.encryption)throw new Error("Saved wallet data is encrypted, but no password is provided");if(!t.isEncrypted&&e.encryption)throw new Error("Saved wallet data is not encrypted, but encryption config is provided");if(e.strategy==="privateKey")return this.import({privateKey:t.data,encryption:e.encryption});if(e.strategy==="mnemonic")return this.import({mnemonic:t.data,encryption:e.encryption});throw new Error("invalid load strategy")}async save(e){const t=this.ethersWallet;if(!t)throw new Error("Wallet is not initialized");if(e.strategy==="encryptedJson"){const n=await t.encrypt(e.password,{scrypt:{N:1}});await this._saveData({address:t.address,data:n,strategy:"encryptedJson",isEncrypted:!0},e.storage)}if(e.strategy==="privateKey"){const n=await _(e.encryption)(t.privateKey);await this._saveData({address:t.address,data:n,strategy:"privateKey",isEncrypted:!!e.encryption},e.storage)}if(e.strategy==="mnemonic"){if(!t.mnemonic)throw new Error("mnemonic can not be computed if wallet is created from a private key or generated using generate()");const n=await _(e.encryption)(t.mnemonic.phrase);await this._saveData({address:t.address,data:n,strategy:"mnemonic",isEncrypted:!!e.encryption},e.storage)}}async isSaved(){try{const e=await this.getSavedData(),t=await this.getAddress();return e?.address===t}catch{return!1}}async deleteSaved(){await this._storage.removeItem(q)}async export(e){const t=this.ethersWallet;if(!t)throw new Error("Wallet is not initialized");if(e.strategy==="encryptedJson")return t.encrypt(e.password,{scrypt:{N:1}});if(e.strategy==="privateKey")return _(e.encryption)(t.privateKey);if(e.strategy==="mnemonic"){if(!t.mnemonic)throw new Error("mnemonic can not be computed if wallet is created from a private key or generated using generate()");return _(e.encryption)(t.mnemonic.phrase)}throw new Error("Invalid export strategy")}async getSavedData(e){const t=e||this._storage;try{const n=await t.getItem(q);if(!n)return null;const i=JSON.parse(n);return i||null}catch{return null}}async _saveData(e,t){await(t||this._storage).setItem(q,JSON.stringify(e))}async disconnect(){await super.disconnect(),this.ethersWallet=void 0}}r(f,"id",p.localWallet);r(f,"meta",{name:"Local Wallet",iconURL:"ipfs://QmbQzSNGvmNYZzem9jZRuYeLe9K2W4pqbdnVUp7Y6edQ8Y/local-wallet.svg"});async function Ie(a){return a}function re(a){return a?e=>(a.decrypt||Ne)(e,a.password):Ie}function _(a){return a?e=>(a.encrypt||Ae)(e,a.password):Ie}function J(a){return!!a.match(/^(0x)?[0-9a-f]{64}$/i)}class L extends y{get walletName(){return"Magic Link"}constructor(e){super(L.id,e),this.options=e}async initializeConnector(){const{MagicAuthConnector:e}=await o(async()=>{const{MagicAuthConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-magic.browser.esm-D0t7GYZm.js");return{MagicAuthConnector:n}},__vite__mapDeps([21,1,2,5,22,3])),t=new e({chains:this.chains,options:this.options});return this.magicConnector=t,this.connector=new u(t),this.connector}async getConnector(){return this.connector?this.connector:await this.initializeConnector()}getMagic(){if(!this.magicConnector)throw new Error("Magic connector is not initialized");return this.magicConnector.getMagicSDK()}async autoConnect(e){await this.initializeConnector(),await this.magicConnector?.initializeMagicSDK(e);const t=this.getMagic();if(new URL(window.location.href).searchParams.get("magic_credential"))try{this.oAuthRedirectResult=await t.oauth.getRedirectResult()}catch{}if(await t.user.isLoggedIn())return super.autoConnect(e);throw new Error("Magic user is not logged in")}async disconnect(){return this.oAuthRedirectResult=void 0,await this.getMagic().user.logout(),super.disconnect()}async connect(e){if("email"in e&&this.options.emailLogin===!1)throw new Error("Email login is disabled");if("phoneNumber"in e&&this.options.smsLogin===!1)throw new Error("SMS login is disabled");return super.connect(e)}}r(L,"meta",{iconURL:"ipfs://QmUMBFZGXxBpgDmZzZAHhbcCL5nYvZnVaYLTajsNjLcxMU/1-Icon_Magic_Color.svg",name:"Magic Link"});r(L,"id",p.magicLink);class V extends y{get walletName(){return"XDEFI"}constructor(e){super(V.id,e),this.isInjected=!!de()}async getConnector(){if(!this.connector){const{XDEFIConnector:e}=await o(async()=>{const{XDEFIConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-xdefi.browser.esm-Y6xqbmJO.js");return{XDEFIConnector:n}},__vite__mapDeps([23,1,2,3,9,5,7])),t=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}});this.connector=new u(t)}return this.connector}}r(V,"id",p.xdefi);class N extends y{get walletName(){return"Safe Wallet"}constructor(e){super(N.id,{...e})}async getConnector(){if(!this.connector){const{SafeConnector:e}=await o(async()=>{const{SafeConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-safe.browser.esm-cEpQtbTM.js");return{SafeConnector:t}},__vite__mapDeps([24,1,2,25,26,27,28]));this.connector=new e}return this.connector}getPersonalWallet(){return this.connector?.personalWallet}autoConnect(e){return this.connect(e)}connect(e){return super.connect(e)}}r(N,"meta",{name:"Safe",iconURL:"ipfs://QmbbyxDDmmLQh8DzzeUR6X6B75bESsNUFmbdvS3ZsQ2pN1/SafeToken.svg"});r(N,"id",p.safe);class T extends y{get walletName(){return"Smart Wallet"}constructor(e){if(e.clientId&&typeof e.chain=="object")try{e.chain={...e.chain,rpc:X(e.chain,e.clientId)}}catch{}super(T.id,{...e})}async getConnector(){if(!this.connector)if(this.options&&await H(this.options.chain,this.options.clientId,this.options.secretKey)){const{ZkSyncConnector:e}=await o(async()=>{const{ZkSyncConnector:t}=await import("./zk-connector-fada2157.browser.esm-2YcbaQVf.js");return{ZkSyncConnector:t}},__vite__mapDeps([29,1,2,30,3,5,7]));this.connector=new e(this.options)}else{const{SmartWalletConnector:e}=await o(async()=>{const{SmartWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-smart-wallet.browser.esm-Cr7ASJsj.js");return{SmartWalletConnector:t}},__vite__mapDeps([31,1,2,30,3,5,7]));this.connector=new e(this.options)}return this.connector}getPersonalWallet(){return this.connector?.personalWallet}async hasPermissionToExecute(e){return(await this.getConnector()).hasPermissionToExecute(e)}async send(e,t){return(await this.getConnector()).send(e,t)}async execute(e,t){return(await this.getConnector()).execute(e,t)}async sendBatch(e,t){return(await this.getConnector()).sendBatch(e,t)}async executeBatch(e,t){return(await this.getConnector()).executeBatch(e,t)}async sendRaw(e,t){return(await this.getConnector()).sendRaw(e,t)}async executeRaw(e,t){return(await this.getConnector()).executeRaw(e,t)}async estimate(e,t){return(await this.getConnector()).estimate(e,t)}async estimateBatch(e,t){return(await this.getConnector()).estimateBatch(e,t)}async estimateRaw(e,t){return(await this.getConnector()).estimateRaw(e,t)}async estimateBatchRaw(e,t){return(await this.getConnector()).estimateBatchRaw(e,t)}async sendBatchRaw(e,t){return(await this.getConnector()).sendBatchRaw(e,t)}async executeBatchRaw(e,t){return(await this.getConnector()).executeBatchRaw(e,t)}async deploy(e){return(await this.getConnector()).deploy(e)}async deployIfNeeded(e){return(await this.getConnector()).deployIfNeeded(e)}async isDeployed(){const e=await this.getConnector();return e.chainId&&await H(e.chainId)?!0:e.isDeployed()}async createSessionKey(e,t){return(await this.getConnector()).grantPermissions(e,t)}async revokeSessionKey(e){return(await this.getConnector()).revokePermissions(e)}async addAdmin(e){return(await this.getConnector()).addAdmin(e)}async removeAdmin(e){return(await this.getConnector()).removeAdmin(e)}async getAllActiveSigners(){return(await this.getConnector()).getAllActiveSigners()}async getAccountContract(){return(await this.getConnector()).getAccountContract()}async getFactoryContract(){return(await this.getConnector()).getFactoryContract()}async verifySignature(e,t,n,i){try{const s=oe(e),l=_e(s);if(be(l,t)===n)return!0}catch{}if(i!==void 0)try{return await le(e,t,n,i||1,this.options?.clientId,this.options?.secretKey)}catch{}return!1}autoConnect(e){return this.connect(e)}connect(e){return super.connect(e)}}r(T,"meta",{name:"Smart Wallet",iconURL:"ipfs://QmeAJVqn17aDNQhjEU3kcWVZCFBrfta8LzaDGkS8Egdiyk/smart-wallet.svg"});r(T,"id",p.smartWallet);class $ extends T{get walletName(){return"Token Bound Smart Wallet"}constructor(e){super({...e,factoryAddress:e.registryAddress||st}),this.tbaOptions=e}async getConnector(){if(!this.tbaConnector){const{TokenBoundSmartWalletConnector:e}=await o(async()=>{const{TokenBoundSmartWalletConnector:t}=await import("./thirdweb-dev-wallets-evm-connectors-token-bound-smart-wallet.browser.esm-C9nBon38.js");return{TokenBoundSmartWalletConnector:t}},__vite__mapDeps([32,31,1,2,30,3,5,7]));this.tbaConnector=new e(this.tbaOptions)}return this.tbaConnector}}r($,"meta",{name:"Token Bound Smart Wallet",iconURL:"ipfs://QmeAJVqn17aDNQhjEU3kcWVZCFBrfta8LzaDGkS8Egdiyk/smart-wallet.svg"});r($,"id",p.tokenBoundSmartWallet);class Y extends y{get walletName(){return"Magic Eden"}constructor(e){super(Y.id,e),this.isInjected=!!we()}async getConnector(){if(!this.connector){const{MagicEdenConnector:e}=await o(async()=>{const{MagicEdenConnector:n}=await import("./thirdweb-dev-wallets-evm-connectors-magic-eden.browser.esm-Cr3wsGXy.js");return{MagicEdenConnector:n}},__vite__mapDeps([33,1,2,3,9,5,7])),t=new e({chains:this.chains,connectorStorage:this.walletStorage,options:{shimDisconnect:!0}});this.connector=new u(t)}return this.connector}}r(Y,"id",p.magicEden);const ct="/sdk/2022-08-12/embedded-wallet",z=()=>localStorage.getItem("IS_THIRDWEB_DEV")==="true"?window.localStorage.getItem("THIRDWEB_DEV_URL")??"http://localhost:3000":"https://embedded-wallet.thirdweb.com",v=a=>`thirdwebEwsWalletUserId-${a}`,lt="walletToken",j=a=>`${lt}-${a}`,dt="a",O=(a,e)=>`${dt}-${a}-${e}`;let Me=(function(a){return a.COGNITO="Cognito",a.GOOGLE="Google",a.EMAIL_OTP="EmailOtp",a.CUSTOM_JWT="CustomJWT",a.CUSTOM_AUTH_ENDPOINT="CustomAuthEndpoint",a.FACEBOOK="Facebook",a.APPLE="Apple",a.PASSKEY="Passkey",a.EXTERNAL_WALLET="ExternalWallet",a.DISCORD="Discord",a})({}),m=(function(a){return a.LOGGED_OUT="Logged Out",a.LOGGED_IN_WALLET_UNINITIALIZED="Logged In, Wallet Uninitialized",a.LOGGED_IN_NEW_DEVICE="Logged In, New Device",a.LOGGED_IN_WALLET_INITIALIZED="Logged In, Wallet Initialized",a})({});const se=new Map;class ee{constructor(e){let{clientId:t}=e;this.isSupported=!!window.localStorage,this.clientId=t}async getItem(e){return this.isSupported?window.localStorage.getItem(e):se.get(e)??null}async setItem(e,t){if(this.isSupported)return window.localStorage.setItem(e,t);se.set(e,t)}async removeItem(e){const t=await this.getItem(e);return this.isSupported&&t?(window.localStorage.removeItem(e),!0):!1}async saveAuthCookie(e){await this.setItem(j(this.clientId),e)}async getAuthCookie(){return this.getItem(j(this.clientId))}async removeAuthCookie(){return this.removeItem(j(this.clientId))}async saveDeviceShare(e,t){await this.saveWalletUserId(t),await this.setItem(O(this.clientId,t),e)}async getDeviceShare(){const e=await this.getWalletUserId();return e?this.getItem(O(this.clientId,e)):null}async removeDeviceShare(){const e=await this.getWalletUserId();return e?this.removeItem(O(this.clientId,e)):!1}async getWalletUserId(){return this.getItem(v(this.clientId))}async saveWalletUserId(e){await this.setItem(v(this.clientId),e)}async removeWalletUserId(){return this.removeItem(v(this.clientId))}}function F(a){return new Promise(e=>{setTimeout(e,a*1e3)})}const ut={height:"100%",width:"100%",border:"none",backgroundColor:"transparent",colorScheme:"light",position:"fixed",top:"0px",right:"0px",zIndex:"2147483646",display:"none"},Z=new Map;class pt{constructor(e){let{link:t,iframeId:n,container:i=document.body,iframeStyles:s,onIframeInitialize:l}=e;r(this,"POLLING_INTERVAL_SECONDS",1.4),this.iframeBaseUrl=z();let c=document.getElementById(n);const d=new URL(t),g="2.5.39";if(d.searchParams.set("sdkVersion",g),!c||c.src!==d.href){if(!c){c=document.createElement("iframe");const I={...ut,...s};Object.assign(c.style,I),c.setAttribute("id",n),c.setAttribute("fetchpriority","high"),i.appendChild(c)}c.src=d.href,c.setAttribute("data-version",g);const h=I=>{if(I.data.eventType==="ewsIframeLoaded"){if(window.removeEventListener("message",h),!c){console.warn("thirdweb Iframe not found");return}this.onIframeLoadHandler(c,l)()}};window.addEventListener("message",h)}this.iframe=c}async onIframeLoadedInitVariables(){return{}}onIframeLoadHandler(e,t){return async()=>{await new Promise(async(i,s)=>{const l=new MessageChannel;l.port1.onmessage=d=>{const{data:g}=d;return l.port1.close(),g.success?(Z.set(e.src,!0),t&&t(),i(!0)):s(new Error(g.error))},e?.contentWindow?.postMessage({eventType:"initIframe",data:await this.onIframeLoadedInitVariables()},this.iframeBaseUrl,[l.port2])})}}async call(e){let{procedureName:t,params:n,showIframe:i=!1}=e;for(;!Z.get(this.iframe.src);)await F(this.POLLING_INTERVAL_SECONDS);return i&&(this.iframe.style.display="block",await F(.005)),new Promise((l,c)=>{const d=new MessageChannel;d.port1.onmessage=async g=>{const{data:h}=g;d.port1.close(),i&&(await F(.1),this.iframe.style.display="none"),h.success?l(h.data):c(new Error(h.error))},this.iframe.contentWindow?.postMessage({eventType:t,data:n},this.iframeBaseUrl,[d.port2])})}destroy(){Z.delete(this.iframe.src)}}class yt extends pt{constructor(e){let{clientId:t,customizationOptions:n}=e;super({iframeId:gt,link:ht({clientId:t,path:ct,queryParams:n}).href,container:document.body}),this.clientId=t}async onIframeLoadedInitVariables(){const e=new ee({clientId:this.clientId});return{authCookie:await e.getAuthCookie(),deviceShareStored:await e.getDeviceShare(),walletUserId:await e.getWalletUserId(),clientId:this.clientId}}}function ht(a){let{clientId:e,path:t,queryParams:n}=a;const i=new URL(`${t}`,z());if(n)for(const s of Object.keys(n))i.searchParams.set(s,n[s]?.toString()||"");return i.searchParams.set("clientId",e),i}const gt="thirdweb-embedded-wallet-iframe";class mt{constructor(e){let{querier:t,preLogin:n,postLogin:i,clientId:s}=e;this.LoginQuerier=t,this.preLogin=n,this.postLogin=i,this.clientId=s}async sendEmailLoginOtp(e){let{email:t}=e;return await this.preLogin(),await this.LoginQuerier.call({procedureName:"sendThirdwebEmailLoginOtp",params:{email:t}})}async sendSmsLoginOtp(e){let{phoneNumber:t}=e;return await this.preLogin(),await this.LoginQuerier.call({procedureName:"sendThirdwebSmsLoginOtp",params:{phoneNumber:t}})}}class wt extends mt{constructor(){super(...arguments),r(this,"closeWindow",e=>{let{isWindowOpenedByFn:t,win:n,closeOpenedWindow:i}=e;t?n?.close():n&&i?i(n):n&&n.close()})}async getOauthLoginUrl(e){return await this.LoginQuerier.call({procedureName:"getHeadlessOauthLoginLink",params:{authProvider:e}})}async loginWithModal(){await this.preLogin();const e=await this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:void 0,showIframe:!0});return this.postLogin(e)}async loginWithEmailOtp(e){let{email:t}=e;await this.preLogin();const n=await this.LoginQuerier.call({procedureName:"loginWithThirdwebModal",params:{email:t},showIframe:!0});return this.postLogin(n)}getOauthPopUpSizing(e){switch(e){case Me.FACEBOOK:return"width=715, height=555";default:return"width=350, height=500"}}async loginWithOauth(e){let t=e?.openedWindow,n=!1;if(t||(t=window.open("","Login",this.getOauthPopUpSizing(e.oauthProvider)),n=!0),!t)throw new Error("Something went wrong opening pop-up");const[{loginLink:i}]=await Promise.all([this.getOauthLoginUrl(e.oauthProvider),this.preLogin()]);t.location.href=i;const s=await new Promise((l,c)=>{const d=window.setInterval(async()=>{t&&t.closed&&(clearInterval(d),window.removeEventListener("message",g),c(new Error("User closed login window")))},1e3),g=async h=>{if(h.origin===z()){if(typeof h.data!="object"){c(new Error("Invalid event data"));return}switch(h.data.eventType){case"userLoginSuccess":{window.removeEventListener("message",g),clearInterval(d),this.closeWindow({isWindowOpenedByFn:n,win:t,closeOpenedWindow:e?.closeOpenedWindow}),h.data.authResult&&l(h.data.authResult);break}case"userLoginFailed":{window.removeEventListener("message",g),clearInterval(d),this.closeWindow({isWindowOpenedByFn:n,win:t,closeOpenedWindow:e?.closeOpenedWindow}),c(new Error(h.data.error));break}case"injectDeveloperClientId":{t?.postMessage({eventType:"injectDeveloperClientIdResult",developerClientId:this.clientId,authOption:e.oauthProvider},z());break}}}};window.addEventListener("message",g)});return this.postLogin({storedToken:{...s.storedToken,shouldStoreCookieString:!0},walletDetails:{...s.walletDetails,isIframeStorageEnabled:!1}})}async loginWithCustomJwt(e){let{encryptionKey:t,jwt:n}=e;await this.preLogin();const i=await this.LoginQuerier.call({procedureName:"loginWithCustomJwt",params:{encryptionKey:t,jwt:n}});return this.postLogin(i)}async loginWithCustomAuthEndpoint(e){let{encryptionKey:t,payload:n}=e;await this.preLogin();const i=await this.LoginQuerier.call({procedureName:"loginWithCustomAuthEndpoint",params:{encryptionKey:t,payload:n}});return this.postLogin(i)}async verifyEmailLoginOtp(e){let{email:t,otp:n,recoveryCode:i}=e;const s=await this.LoginQuerier.call({procedureName:"verifyThirdwebEmailLoginOtp",params:{email:t,otp:n,recoveryCode:i}});return this.postLogin(s)}async verifySmsLoginOtp(e){let{phoneNumber:t,otp:n,recoveryCode:i}=e;const s=await this.LoginQuerier.call({procedureName:"verifyThirdwebSmsLoginOtp",params:{phoneNumber:t,otp:n,recoveryCode:i}});return this.postLogin(s)}}class It{constructor(e){let{clientId:t,querier:n,onAuthSuccess:i}=e;this.clientId=t,this.AuthQuerier=n,this.localStorage=new ee({clientId:t}),this.onAuthSuccess=i,this.BaseLogin=new wt({postLogin:async s=>this.postLogin(s),preLogin:async()=>{await this.preLogin()},querier:n,clientId:t})}async preLogin(){await this.logout()}async postLogin(e){let{storedToken:t,walletDetails:n}=e;return t.shouldStoreCookieString&&await this.localStorage.saveAuthCookie(t.cookieString),await this.onAuthSuccess({storedToken:t,walletDetails:n})}async loginWithModal(){return this.BaseLogin.loginWithModal()}async loginWithEmailOtp(e){return this.BaseLogin.loginWithEmailOtp(e)}async loginWithCustomJwt(e){return this.BaseLogin.loginWithCustomJwt(e)}async loginWithCustomAuthEndpoint(e){return this.BaseLogin.loginWithCustomAuthEndpoint(e)}async loginWithOauth(e){return this.BaseLogin.loginWithOauth(e)}async sendEmailLoginOtp(e){let{email:t}=e;return this.BaseLogin.sendEmailLoginOtp({email:t})}async sendSmsLoginOtp(e){let{phoneNumber:t}=e;return this.BaseLogin.sendSmsLoginOtp({phoneNumber:t})}async verifyEmailLoginOtp(e){return this.BaseLogin.verifyEmailLoginOtp(e)}async verifySmsLoginOtp(e){return this.BaseLogin.verifySmsLoginOtp(e)}async logout(){const{success:e}=await this.AuthQuerier.call({procedureName:"logout",params:void 0}),t=await this.localStorage.removeAuthCookie(),n=await this.localStorage.removeWalletUserId();return{success:e||t||n}}}class te extends ve{constructor(e){let{provider:t,clientId:n,querier:i}=e;super(),r(this,"DEFAULT_ETHEREUM_CHAIN_ID",5),this.clientId=n,this.querier=i,this.endpoint=t.connection?.url,je.defineReadOnly(this,"provider",t)}async getAddress(){const{address:e}=await this.querier.call({procedureName:"getAddress",params:void 0});return e}async signMessage(e){const{signedMessage:t}=await this.querier.call({procedureName:"signMessage",params:{message:e,chainId:(await this.provider?.getNetwork())?.chainId??this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return t}async signTransaction(e){const{signedTransaction:t}=await this.querier.call({procedureName:"signTransaction",params:{transaction:e,chainId:(await this.provider?.getNetwork())?.chainId??this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return t}async sendTransaction(e){if(!this.provider)throw new Error("Provider not found");const n={...await Oe(this.provider),...e};return super.sendTransaction(n)}async _signTypedData(e,t,n){const{signedTypedData:i}=await this.querier.call({procedureName:"signTypedDataV4",params:{domain:e,types:t,message:n,chainId:(await this.provider?.getNetwork())?.chainId??this.DEFAULT_ETHEREUM_CHAIN_ID,rpcEndpoint:this.endpoint}});return i}connect(e){return new te({clientId:this.clientId,provider:e,querier:this.querier})}}class Mt{constructor(e){let{clientId:t,chain:n,querier:i}=e;this.clientId=t,this.chain=n,this.walletManagerQuerier=i,this.localStorage=new ee({clientId:t})}async postWalletSetUp(e){let{deviceShareStored:t,walletAddress:n,isIframeStorageEnabled:i,walletUserId:s}=e;return i||await this.localStorage.saveDeviceShare(t,s),{walletAddress:n}}async getUserWalletStatus(){const e=await this.walletManagerQuerier.call({procedureName:"getUserStatus",params:void 0});return e.status===m.LOGGED_IN_WALLET_INITIALIZED?{status:m.LOGGED_IN_WALLET_INITIALIZED,...e.user,wallet:this}:e.status===m.LOGGED_IN_NEW_DEVICE?{status:m.LOGGED_IN_WALLET_UNINITIALIZED,...e.user}:e.status===m.LOGGED_IN_WALLET_UNINITIALIZED?{status:m.LOGGED_IN_WALLET_UNINITIALIZED,...e.user}:{status:e.status}}async setChain(e){let{chain:t}=e;this.chain=t}async getEthersJsSigner(e){return new te({clientId:this.clientId,provider:Se(e?.rpcEndpoint??it[this.chain]),querier:this.walletManagerQuerier})}}class Tt{isClientIdLegacyPaper(e){return e.indexOf("-")>0&&e.length===36}constructor(e){let{clientId:t,chain:n,styles:i,onAuthSuccess:s}=e;if(this.isClientIdLegacyPaper(t))throw new Error("You are using a legacy clientId. Please use the clientId found on the thirdweb dashboard settings page");this.clientId=t,this.querier=new yt({clientId:t,customizationOptions:i}),this.wallet=new Mt({clientId:t,chain:n,querier:this.querier}),this.auth=new It({clientId:t,querier:this.querier,onAuthSuccess:async l=>(s?.(l),await this.wallet.postWalletSetUp({...l.walletDetails,walletUserId:l.storedToken.authDetails.userWalletId}),await this.querier.call({procedureName:"initIframe",params:{deviceShareStored:l.walletDetails.deviceShareStored,clientId:this.clientId,walletUserId:l.storedToken.authDetails.userWalletId,authCookie:l.storedToken.cookieString}}),{user:{status:m.LOGGED_IN_WALLET_INITIALIZED,authDetails:l.storedToken.authDetails,wallet:this.wallet,walletAddress:l.walletDetails.walletAddress}})})}async getUser(){return this.wallet.getUserWalletStatus()}}const _t=Object.freeze(Object.defineProperty({__proto__:null,AUTH_TOKEN_LOCAL_STORAGE_NAME:j,AbstractClientWallet:y,AddChainError:Je,AsyncLocalStorage:We,AuthProvider:Me,BloctoWallet:C,ChainNotConfiguredError:Xe,Coin98Wallet:Q,CoinbaseWallet:Ge,Connector:Pe,CoreWallet:U,CryptoDefiWallet:x,DEFAULT_DAPP_META:ze,DEFAULT_FACTORY_ADDRESS:ot,DEVICE_SHARE_LOCAL_STORAGE_NAME:O,EmbeddedWallet:W,EmbeddedWalletSdk:Tt,FrameWallet:G,ImTokenWallet:D,InAppWallet:W,InjectedWallet:B,LocalWallet:f,MagicEdenWallet:Y,MagicLink:L,MetaMaskWallet:Ue,OKXWallet:P,OneKeyWallet:R,PaperWallet:E,PhantomWallet:Ve,ProviderRpcError:$e,RabbyWallet:k,RainbowWallet:Ye,SafeWallet:N,SignerWallet:Be,SmartWallet:T,SwitchChainError:et,TokenBoundSmartWallet:$,TrustWallet:qe,UserRejectedRequestError:tt,UserWalletStatus:m,WALLET_USER_ID_LOCAL_STORAGE_NAME:v,WagmiAdapter:u,WagmiConnector:He,WalletConnect:Fe,XDEFIWallet:V,ZerionWallet:Ze,assertWindowEthereum:w,checkContractWalletSignature:le,createAsyncLocalStorage:ce,getInjectedCoin98Provider:me,getInjectedCoinbaseProvider:Qe,getInjectedCoreWalletProvider:pe,getInjectedCryptoDefiWalletProvider:he,getInjectedMagicEdenProvider:we,getInjectedMetamaskProvider:Re,getInjectedOKXProvider:ue,getInjectedOneKeyProvider:ye,getInjectedPhantomProvider:xe,getInjectedRabbyProvider:ge,getInjectedRainbowProvider:ke,getInjectedXDEFIProvider:de,isValidPrivateKey:J,isZkSyncChain:H,normalizeChainId:nt,walletIds:p},Symbol.toStringTag,{value:"Module"}));export{Me as A,ot as D,Tt as E,Nt as M,m as U,pe as a,ye as b,he as c,ge as d,me as e,de as f,ue as g,Lt as h,H as i,At as j,le as k,st as l,we as m,_t as t};
