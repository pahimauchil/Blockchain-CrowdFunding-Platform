var _e=(e=>(e.MissingApiKey="MISSING_API_KEY",e.ModalNotReady="MODAL_NOT_READY",e.MalformedResponse="MALFORMED_RESPONSE",e.InvalidArgument="INVALID_ARGUMENT",e.ExtensionNotInitialized="EXTENSION_NOT_INITIALIZED",e.IncompatibleExtensions="INCOMPATIBLE_EXTENSIONS",e))(_e||{}),tt=(e=>(e.SyncWeb3Method="SYNC_WEB3_METHOD",e.DuplicateIframe="DUPLICATE_IFRAME",e.ReactNativeEndpointConfiguration="REACT_NATIVE_ENDPOINT_CONFIGURATION",e.DeprecationNotice="DEPRECATION_NOTICE",e))(tt||{}),yt=(e=>(e[e.ParseError=-32700]="ParseError",e[e.InvalidRequest=-32600]="InvalidRequest",e[e.MethodNotFound=-32601]="MethodNotFound",e[e.InvalidParams=-32602]="InvalidParams",e[e.InternalError=-32603]="InternalError",e[e.MagicLinkFailedVerification=-1e4]="MagicLinkFailedVerification",e[e.MagicLinkExpired=-10001]="MagicLinkExpired",e[e.MagicLinkRateLimited=-10002]="MagicLinkRateLimited",e[e.MagicLinkInvalidRedirectURL=-10006]="MagicLinkInvalidRedirectURL",e[e.UserAlreadyLoggedIn=-10003]="UserAlreadyLoggedIn",e[e.UpdateEmailFailed=-10004]="UpdateEmailFailed",e[e.UserRequestEditEmail=-10005]="UserRequestEditEmail",e[e.InactiveRecipient=-10010]="InactiveRecipient",e[e.AccessDeniedToUser=-10011]="AccessDeniedToUser",e))(yt||{}),z=(e=>(e.LoginWithSms="magic_auth_login_with_sms",e.LoginWithEmailOTP="magic_auth_login_with_email_otp",e.LoginWithMagicLink="magic_auth_login_with_magic_link",e.LoginWithCredential="magic_auth_login_with_credential",e.GetIdToken="magic_auth_get_id_token",e.GenerateIdToken="magic_auth_generate_id_token",e.GetMetadata="magic_auth_get_metadata",e.IsLoggedIn="magic_auth_is_logged_in",e.Logout="magic_auth_logout",e.UpdateEmail="magic_auth_update_email",e.UserSettings="magic_auth_settings",e.UserSettingsTestMode="magic_auth_settings_testing_mode",e.LoginWithSmsTestMode="magic_auth_login_with_sms_testing_mode",e.LoginWithEmailOTPTestMode="magic_auth_login_with_email_otp_testing_mode",e.LoginWithMagicLinkTestMode="magic_login_with_magic_link_testing_mode",e.LoginWithCredentialTestMode="magic_auth_login_with_credential_testing_mode",e.GetIdTokenTestMode="magic_auth_get_id_token_testing_mode",e.GenerateIdTokenTestMode="magic_auth_generate_id_token_testing_mode",e.GetMetadataTestMode="magic_auth_get_metadata_testing_mode",e.IsLoggedInTestMode="magic_auth_is_logged_in_testing_mode",e.LogoutTestMode="magic_auth_logout_testing_mode",e.UpdateEmailTestMode="magic_auth_update_email_testing_mode",e.IntermediaryEvent="magic_intermediary_event",e.RequestAccounts="eth_requestAccounts",e.GetInfo="mc_get_wallet_info",e.ShowUI="mc_wallet",e.NFTPurchase="magic_nft_purchase",e.RequestUserInfoWithUI="mc_request_user_info",e.Disconnect="mc_disconnect",e.UpdatePhoneNumber="magic_auth_update_phone_number",e.UpdatePhoneNumberTestMode="magic_auth_update_phone_number_testing_mode",e.RecoverAccount="magic_auth_recover_account",e.RecoverAccountTestMode="magic_auth_recover_account_testing_mode",e))(z||{}),Oe=(e=>(e.MAGIC_HANDLE_RESPONSE="MAGIC_HANDLE_RESPONSE",e.MAGIC_OVERLAY_READY="MAGIC_OVERLAY_READY",e.MAGIC_SHOW_OVERLAY="MAGIC_SHOW_OVERLAY",e.MAGIC_HIDE_OVERLAY="MAGIC_HIDE_OVERLAY",e.MAGIC_HANDLE_EVENT="MAGIC_HANDLE_EVENT",e))(Oe||{}),Ve=(e=>(e.MAGIC_HANDLE_REQUEST="MAGIC_HANDLE_REQUEST",e))(Ve||{}),Rn=(e=>(e.Harmony="HARMONY",e))(Rn||{}),dt={},On=Object.create,rt=Object.defineProperty,An=Object.defineProperties,Nn=Object.getOwnPropertyDescriptor,Sn=Object.getOwnPropertyDescriptors,$n=Object.getOwnPropertyNames,qt=Object.getOwnPropertySymbols,Ln=Object.getPrototypeOf,ur=Object.prototype.hasOwnProperty,Tn=Object.prototype.propertyIsEnumerable,zt=(e,t,r)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,cr=(e,t)=>{for(var r in t||(t={}))ur.call(t,r)&&zt(e,r,t[r]);if(qt)for(var r of qt(t))Tn.call(t,r)&&zt(e,r,t[r]);return e},Mn=(e,t)=>An(e,Sn(t)),jn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Pn=(e,t)=>{for(var r in t)rt(e,r,{get:t[r],enumerable:!0})},Cn=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of $n(t))!ur.call(e,s)&&s!==r&&rt(e,s,{get:()=>t[s],enumerable:!(o=Nn(t,s))||o.enumerable});return e},kn=(e,t,r)=>(r=e!=null?On(Ln(e)):{},Cn(!e||!e.__esModule?rt(r,"default",{value:e,enumerable:!0}):r,e)),de=(e,t,r)=>new Promise((o,s)=>{var u=y=>{try{h(r.next(y))}catch(v){s(v)}},E=y=>{try{h(r.throw(y))}catch(v){s(v)}},h=y=>y.done?o(y.value):Promise.resolve(y.value).then(u,E);h((r=r.apply(e,t)).next())}),xn=jn((e,t)=>{var r=Object.prototype.hasOwnProperty,o="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1));function u(v,g,p){this.fn=v,this.context=g,this.once=p||!1}function E(v,g,p,N,$){if(typeof p!="function")throw new TypeError("The listener must be a function");var P=new u(p,N||v,$),T=o?o+g:g;return v._events[T]?v._events[T].fn?v._events[T]=[v._events[T],P]:v._events[T].push(P):(v._events[T]=P,v._eventsCount++),v}function h(v,g){--v._eventsCount===0?v._events=new s:delete v._events[g]}function y(){this._events=new s,this._eventsCount=0}y.prototype.eventNames=function(){var v=[],g,p;if(this._eventsCount===0)return v;for(p in g=this._events)r.call(g,p)&&v.push(o?p.slice(1):p);return Object.getOwnPropertySymbols?v.concat(Object.getOwnPropertySymbols(g)):v},y.prototype.listeners=function(v){var g=o?o+v:v,p=this._events[g];if(!p)return[];if(p.fn)return[p.fn];for(var N=0,$=p.length,P=new Array($);N<$;N++)P[N]=p[N].fn;return P},y.prototype.listenerCount=function(v){var g=o?o+v:v,p=this._events[g];return p?p.fn?1:p.length:0},y.prototype.emit=function(v,g,p,N,$,P){var T=o?o+v:v;if(!this._events[T])return!1;var d=this._events[T],S=arguments.length,j,M;if(d.fn){switch(d.once&&this.removeListener(v,d.fn,void 0,!0),S){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,g),!0;case 3:return d.fn.call(d.context,g,p),!0;case 4:return d.fn.call(d.context,g,p,N),!0;case 5:return d.fn.call(d.context,g,p,N,$),!0;case 6:return d.fn.call(d.context,g,p,N,$,P),!0}for(M=1,j=new Array(S-1);M<S;M++)j[M-1]=arguments[M];d.fn.apply(d.context,j)}else{var F=d.length,I;for(M=0;M<F;M++)switch(d[M].once&&this.removeListener(v,d[M].fn,void 0,!0),S){case 1:d[M].fn.call(d[M].context);break;case 2:d[M].fn.call(d[M].context,g);break;case 3:d[M].fn.call(d[M].context,g,p);break;case 4:d[M].fn.call(d[M].context,g,p,N);break;default:if(!j)for(I=1,j=new Array(S-1);I<S;I++)j[I-1]=arguments[I];d[M].fn.apply(d[M].context,j)}}return!0},y.prototype.on=function(v,g,p){return E(this,v,g,p,!1)},y.prototype.once=function(v,g,p){return E(this,v,g,p,!0)},y.prototype.removeListener=function(v,g,p,N){var $=o?o+v:v;if(!this._events[$])return this;if(!g)return h(this,$),this;var P=this._events[$];if(P.fn)P.fn===g&&(!N||P.once)&&(!p||P.context===p)&&h(this,$);else{for(var T=0,d=[],S=P.length;T<S;T++)(P[T].fn!==g||N&&!P[T].once||p&&P[T].context!==p)&&d.push(P[T]);d.length?this._events[$]=d.length===1?d[0]:d:h(this,$)}return this},y.prototype.removeAllListeners=function(v){var g;return v?(g=o?o+v:v,this._events[g]&&h(this,g)):(this._events=new s,this._eventsCount=0),this},y.prototype.off=y.prototype.removeListener,y.prototype.addListener=y.prototype.on,y.prefixed=o,y.EventEmitter=y,typeof t<"u"&&(t.exports=y)});function Dn(e){let t={exports:{}};return e(t,t.exports),t.exports}var Un=Number.MAX_SAFE_INTEGER||9007199254740991,gt={MAX_LENGTH:256,MAX_SAFE_INTEGER:Un,MAX_SAFE_COMPONENT_LENGTH:16},Bn=typeof process=="object"&&dt&&dt.NODE_DEBUG&&/\bsemver\b/i.test(dt.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{},X=Bn,ke=Dn(function(e,t){let{MAX_SAFE_COMPONENT_LENGTH:r}=gt,o=(t=e.exports={}).re=[],s=t.src=[],u=t.t={},E=0,h=(y,v,g)=>{let p=E++;X(p,v),u[y]=p,s[p]=v,o[p]=new RegExp(v,g?"g":void 0)};h("NUMERICIDENTIFIER","0|[1-9]\\d*"),h("NUMERICIDENTIFIERLOOSE","[0-9]+"),h("NONNUMERICIDENTIFIER","\\d*[a-zA-Z-][a-zA-Z0-9-]*"),h("MAINVERSION",`(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})\\.(${s[u.NUMERICIDENTIFIER]})`),h("MAINVERSIONLOOSE",`(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})\\.(${s[u.NUMERICIDENTIFIERLOOSE]})`),h("PRERELEASEIDENTIFIER",`(?:${s[u.NUMERICIDENTIFIER]}|${s[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASEIDENTIFIERLOOSE",`(?:${s[u.NUMERICIDENTIFIERLOOSE]}|${s[u.NONNUMERICIDENTIFIER]})`),h("PRERELEASE",`(?:-(${s[u.PRERELEASEIDENTIFIER]}(?:\\.${s[u.PRERELEASEIDENTIFIER]})*))`),h("PRERELEASELOOSE",`(?:-?(${s[u.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${s[u.PRERELEASEIDENTIFIERLOOSE]})*))`),h("BUILDIDENTIFIER","[0-9A-Za-z-]+"),h("BUILD",`(?:\\+(${s[u.BUILDIDENTIFIER]}(?:\\.${s[u.BUILDIDENTIFIER]})*))`),h("FULLPLAIN",`v?${s[u.MAINVERSION]}${s[u.PRERELEASE]}?${s[u.BUILD]}?`),h("FULL",`^${s[u.FULLPLAIN]}$`),h("LOOSEPLAIN",`[v=\\s]*${s[u.MAINVERSIONLOOSE]}${s[u.PRERELEASELOOSE]}?${s[u.BUILD]}?`),h("LOOSE",`^${s[u.LOOSEPLAIN]}$`),h("GTLT","((?:<|>)?=?)"),h("XRANGEIDENTIFIERLOOSE",`${s[u.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),h("XRANGEIDENTIFIER",`${s[u.NUMERICIDENTIFIER]}|x|X|\\*`),h("XRANGEPLAIN",`[v=\\s]*(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:\\.(${s[u.XRANGEIDENTIFIER]})(?:${s[u.PRERELEASE]})?${s[u.BUILD]}?)?)?`),h("XRANGEPLAINLOOSE",`[v=\\s]*(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:\\.(${s[u.XRANGEIDENTIFIERLOOSE]})(?:${s[u.PRERELEASELOOSE]})?${s[u.BUILD]}?)?)?`),h("XRANGE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAIN]}$`),h("XRANGELOOSE",`^${s[u.GTLT]}\\s*${s[u.XRANGEPLAINLOOSE]}$`),h("COERCE",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?(?:$|[^\\d])`),h("COERCERTL",s[u.COERCE],!0),h("LONETILDE","(?:~>?)"),h("TILDETRIM",`(\\s*)${s[u.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",h("TILDE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAIN]}$`),h("TILDELOOSE",`^${s[u.LONETILDE]}${s[u.XRANGEPLAINLOOSE]}$`),h("LONECARET","(?:\\^)"),h("CARETTRIM",`(\\s*)${s[u.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",h("CARET",`^${s[u.LONECARET]}${s[u.XRANGEPLAIN]}$`),h("CARETLOOSE",`^${s[u.LONECARET]}${s[u.XRANGEPLAINLOOSE]}$`),h("COMPARATORLOOSE",`^${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]})$|^$`),h("COMPARATOR",`^${s[u.GTLT]}\\s*(${s[u.FULLPLAIN]})$|^$`),h("COMPARATORTRIM",`(\\s*)${s[u.GTLT]}\\s*(${s[u.LOOSEPLAIN]}|${s[u.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",h("HYPHENRANGE",`^\\s*(${s[u.XRANGEPLAIN]})\\s+-\\s+(${s[u.XRANGEPLAIN]})\\s*$`),h("HYPHENRANGELOOSE",`^\\s*(${s[u.XRANGEPLAINLOOSE]})\\s+-\\s+(${s[u.XRANGEPLAINLOOSE]})\\s*$`),h("STAR","(<|>)?=?\\s*\\*"),h("GTE0","^\\s*>=\\s*0.0.0\\s*$"),h("GTE0PRE","^\\s*>=\\s*0.0.0-0\\s*$")}),Ht=/^[0-9]+$/,Fn=(e,t)=>{let r=Ht.test(e),o=Ht.test(t);return r&&o&&(e=+e,t=+t),e===t?0:r&&!o?-1:o&&!r?1:e<t?-1:1},Gn={compareIdentifiers:Fn},{MAX_LENGTH:Wt,MAX_SAFE_INTEGER:Be}=gt,{re:Xt,t:Vt}=ke,{compareIdentifiers:Te}=Gn,re=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof re){if(t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid Version: ${t}`);if(t.length>Wt)throw new TypeError(`version is longer than ${Wt} characters`);X("SemVer",t,r),this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease;let o=t.trim().match(r.loose?Xt[Vt.LOOSE]:Xt[Vt.FULL]);if(!o)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+o[1],this.minor=+o[2],this.patch=+o[3],this.major>Be||this.major<0)throw new TypeError("Invalid major version");if(this.minor>Be||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>Be||this.patch<0)throw new TypeError("Invalid patch version");o[4]?this.prerelease=o[4].split(".").map(s=>{if(/^[0-9]+$/.test(s)){let u=+s;if(u>=0&&u<Be)return u}return s}):this.prerelease=[],this.build=o[5]?o[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(X("SemVer.compare",this.version,this.options,t),!(t instanceof re)){if(typeof t=="string"&&t===this.version)return 0;t=new re(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof re||(t=new re(t,this.options)),Te(this.major,t.major)||Te(this.minor,t.minor)||Te(this.patch,t.patch)}comparePre(t){if(t instanceof re||(t=new re(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let r=0;do{let o=this.prerelease[r],s=t.prerelease[r];if(X("prerelease compare",r,o,s),o===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(o===void 0)return-1;if(o!==s)return Te(o,s)}while(++r)}compareBuild(t){t instanceof re||(t=new re(t,this.options));let r=0;do{let o=this.build[r],s=t.build[r];if(X("prerelease compare",r,o,s),o===void 0&&s===void 0)return 0;if(s===void 0)return 1;if(o===void 0)return-1;if(o!==s)return Te(o,s)}while(++r)}inc(t,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",r),this.inc("pre",r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",r),this.inc("pre",r);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{let o=this.prerelease.length;for(;--o>=0;)typeof this.prerelease[o]=="number"&&(this.prerelease[o]++,o=-2);o===-1&&this.prerelease.push(0)}r&&(this.prerelease[0]===r?isNaN(this.prerelease[1])&&(this.prerelease=[r,0]):this.prerelease=[r,0]);break;default:throw new Error(`invalid increment argument: ${t}`)}return this.format(),this.raw=this.version,this}},qn=(e,t,r)=>new re(e,r).compare(new re(t,r)),Se=qn,zn=(e,t,r)=>Se(e,t,r)===0,Hn=zn,Wn=(e,t,r)=>Se(e,t,r)!==0,Xn=Wn,Vn=(e,t,r)=>Se(e,t,r)>0,Yn=Vn,Kn=(e,t,r)=>Se(e,t,r)>=0,Jn=Kn,Qn=(e,t,r)=>Se(e,t,r)<0,Zn=Qn,eo=(e,t,r)=>Se(e,t,r)<=0,to=eo,ro=(e,t,r,o)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e===r;case"!==":return typeof e=="object"&&(e=e.version),typeof r=="object"&&(r=r.version),e!==r;case"":case"=":case"==":return Hn(e,r,o);case"!=":return Xn(e,r,o);case">":return Yn(e,r,o);case">=":return Jn(e,r,o);case"<":return Zn(e,r,o);case"<=":return to(e,r,o);default:throw new TypeError(`Invalid operator: ${t}`)}},ht=ro,Me=Symbol("SemVer ANY"),Pe=class{static get ANY(){return Me}constructor(e,t){if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof Pe){if(e.loose===!!t.loose)return e;e=e.value}X("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.semver===Me?this.value="":this.value=this.operator+this.semver.version,X("comp",this)}parse(e){let t=this.options.loose?Yt[Kt.COMPARATORLOOSE]:Yt[Kt.COMPARATOR],r=e.match(t);if(!r)throw new TypeError(`Invalid comparator: ${e}`);this.operator=r[1]!==void 0?r[1]:"",this.operator==="="&&(this.operator=""),r[2]?this.semver=new re(r[2],this.options.loose):this.semver=Me}toString(){return this.value}test(e){if(X("Comparator.test",e,this.options.loose),this.semver===Me||e===Me)return!0;if(typeof e=="string")try{e=new re(e,this.options)}catch{return!1}return ht(e,this.operator,this.semver,this.options)}intersects(e,t){if(!(e instanceof Pe))throw new TypeError("a Comparator is required");if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),this.operator==="")return this.value===""||new Ae(e.value,t).test(this.value);if(e.operator==="")return e.value===""||new Ae(this.value,t).test(e.semver);let r=!(this.operator!==">="&&this.operator!==">"||e.operator!==">="&&e.operator!==">"),o=!(this.operator!=="<="&&this.operator!=="<"||e.operator!=="<="&&e.operator!=="<"),s=this.semver.version===e.semver.version,u=!(this.operator!==">="&&this.operator!=="<="||e.operator!==">="&&e.operator!=="<="),E=ht(this.semver,"<",e.semver,t)&&(this.operator===">="||this.operator===">")&&(e.operator==="<="||e.operator==="<"),h=ht(this.semver,">",e.semver,t)&&(this.operator==="<="||this.operator==="<")&&(e.operator===">="||e.operator===">");return r||o||s&&u||E||h}},{re:Yt,t:Kt}=ke,Ae=class{constructor(t,r){if(r&&typeof r=="object"||(r={loose:!!r,includePrerelease:!1}),t instanceof Ae)return t.loose===!!r.loose&&t.includePrerelease===!!r.includePrerelease?t:new Ae(t.raw,r);if(t instanceof Pe)return this.raw=t.value,this.set=[[t]],this.format(),this;if(this.options=r,this.loose=!!r.loose,this.includePrerelease=!!r.includePrerelease,this.raw=t,this.set=t.split(/\s*\|\|\s*/).map(o=>this.parseRange(o.trim())).filter(o=>o.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${t}`);this.format()}format(){return this.range=this.set.map(t=>t.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange(t){let{loose:r}=this.options;t=t.trim();let o=r?ae[ne.HYPHENRANGELOOSE]:ae[ne.HYPHENRANGE];t=t.replace(o,mo(this.options.includePrerelease)),X("hyphen replace",t),t=t.replace(ae[ne.COMPARATORTRIM],no),X("comparator trim",t,ae[ne.COMPARATORTRIM]),t=(t=(t=t.replace(ae[ne.TILDETRIM],oo)).replace(ae[ne.CARETTRIM],io)).split(/\s+/).join(" ");let s=r?ae[ne.COMPARATORLOOSE]:ae[ne.COMPARATOR];return t.split(" ").map(u=>ao(u,this.options)).join(" ").split(/\s+/).map(u=>vo(u,this.options)).filter(this.options.loose?u=>!!u.match(s):()=>!0).map(u=>new Pe(u,this.options))}intersects(t,r){if(!(t instanceof Ae))throw new TypeError("a Range is required");return this.set.some(o=>Jt(o,r)&&t.set.some(s=>Jt(s,r)&&o.every(u=>s.every(E=>u.intersects(E,r)))))}test(t){if(!t)return!1;if(typeof t=="string")try{t=new re(t,this.options)}catch{return!1}for(let r=0;r<this.set.length;r++)if(yo(this.set[r],t,this.options))return!0;return!1}},{re:ae,t:ne,comparatorTrimReplace:no,tildeTrimReplace:oo,caretTrimReplace:io}=ke,Jt=(e,t)=>{let r=!0,o=e.slice(),s=o.pop();for(;r&&o.length;)r=o.every(u=>s.intersects(u,t)),s=o.pop();return r},ao=(e,t)=>(X("comp",e,t),e=co(e,t),X("caret",e),e=so(e,t),X("tildes",e),e=fo(e,t),X("xrange",e),e=po(e,t),X("stars",e),e),se=e=>!e||e.toLowerCase()==="x"||e==="*",so=(e,t)=>e.trim().split(/\s+/).map(r=>uo(r,t)).join(" "),uo=(e,t)=>{let r=t.loose?ae[ne.TILDELOOSE]:ae[ne.TILDE];return e.replace(r,(o,s,u,E,h)=>{let y;return X("tilde",e,o,s,u,E,h),se(s)?y="":se(u)?y=`>=${s}.0.0 <${+s+1}.0.0-0`:se(E)?y=`>=${s}.${u}.0 <${s}.${+u+1}.0-0`:h?(X("replaceTilde pr",h),y=`>=${s}.${u}.${E}-${h} <${s}.${+u+1}.0-0`):y=`>=${s}.${u}.${E} <${s}.${+u+1}.0-0`,X("tilde return",y),y})},co=(e,t)=>e.trim().split(/\s+/).map(r=>lo(r,t)).join(" "),lo=(e,t)=>{X("caret",e,t);let r=t.loose?ae[ne.CARETLOOSE]:ae[ne.CARET],o=t.includePrerelease?"-0":"";return e.replace(r,(s,u,E,h,y)=>{let v;return X("caret",e,s,u,E,h,y),se(u)?v="":se(E)?v=`>=${u}.0.0${o} <${+u+1}.0.0-0`:se(h)?v=u==="0"?`>=${u}.${E}.0${o} <${u}.${+E+1}.0-0`:`>=${u}.${E}.0${o} <${+u+1}.0.0-0`:y?(X("replaceCaret pr",y),v=u==="0"?E==="0"?`>=${u}.${E}.${h}-${y} <${u}.${E}.${+h+1}-0`:`>=${u}.${E}.${h}-${y} <${u}.${+E+1}.0-0`:`>=${u}.${E}.${h}-${y} <${+u+1}.0.0-0`):(X("no pr"),v=u==="0"?E==="0"?`>=${u}.${E}.${h}${o} <${u}.${E}.${+h+1}-0`:`>=${u}.${E}.${h}${o} <${u}.${+E+1}.0-0`:`>=${u}.${E}.${h} <${+u+1}.0.0-0`),X("caret return",v),v})},fo=(e,t)=>(X("replaceXRanges",e,t),e.split(/\s+/).map(r=>ho(r,t)).join(" ")),ho=(e,t)=>{e=e.trim();let r=t.loose?ae[ne.XRANGELOOSE]:ae[ne.XRANGE];return e.replace(r,(o,s,u,E,h,y)=>{X("xRange",e,o,s,u,E,h,y);let v=se(u),g=v||se(E),p=g||se(h),N=p;return s==="="&&N&&(s=""),y=t.includePrerelease?"-0":"",v?o=s===">"||s==="<"?"<0.0.0-0":"*":s&&N?(g&&(E=0),h=0,s===">"?(s=">=",g?(u=+u+1,E=0,h=0):(E=+E+1,h=0)):s==="<="&&(s="<",g?u=+u+1:E=+E+1),s==="<"&&(y="-0"),o=`${s+u}.${E}.${h}${y}`):g?o=`>=${u}.0.0${y} <${+u+1}.0.0-0`:p&&(o=`>=${u}.${E}.0${y} <${u}.${+E+1}.0-0`),X("xRange return",o),o})},po=(e,t)=>(X("replaceStars",e,t),e.trim().replace(ae[ne.STAR],"")),vo=(e,t)=>(X("replaceGTE0",e,t),e.trim().replace(ae[t.includePrerelease?ne.GTE0PRE:ne.GTE0],"")),mo=e=>(t,r,o,s,u,E,h,y,v,g,p,N,$)=>`${r=se(o)?"":se(s)?`>=${o}.0.0${e?"-0":""}`:se(u)?`>=${o}.${s}.0${e?"-0":""}`:E?`>=${r}`:`>=${r}${e?"-0":""}`} ${y=se(v)?"":se(g)?`<${+v+1}.0.0-0`:se(p)?`<${v}.${+g+1}.0-0`:N?`<=${v}.${g}.${p}-${N}`:e?`<${v}.${g}.${+p+1}-0`:`<=${y}`}`.trim(),yo=(e,t,r)=>{for(let o=0;o<e.length;o++)if(!e[o].test(t))return!1;if(t.prerelease.length&&!r.includePrerelease){for(let o=0;o<e.length;o++)if(X(e[o].semver),e[o].semver!==Pe.ANY&&e[o].semver.prerelease.length>0){let s=e[o].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0},go=(e,t,r)=>{try{t=new Ae(t,r)}catch{return!1}return t.test(e)},{MAX_LENGTH:_o}=gt,{re:Qt,t:Zt}=ke,Eo=(e,t)=>{if(t&&typeof t=="object"||(t={loose:!!t,includePrerelease:!1}),e instanceof re)return e;if(typeof e!="string"||e.length>_o||!(t.loose?Qt[Zt.LOOSE]:Qt[Zt.FULL]).test(e))return null;try{return new re(e,t)}catch{return null}},Io=Eo,{re:Fe,t:Ge}=ke,bo=(e,t)=>{if(e instanceof re)return e;if(typeof e=="number"&&(e=String(e)),typeof e!="string")return null;let r=null;if((t=t||{}).rtl){let o;for(;(o=Fe[Ge.COERCERTL].exec(e))&&(!r||r.index+r[0].length!==e.length);)r&&o.index+o[0].length===r.index+r[0].length||(r=o),Fe[Ge.COERCERTL].lastIndex=o.index+o[1].length+o[2].length;Fe[Ge.COERCERTL].lastIndex=-1}else r=e.match(Fe[Ge.COERCE]);return r===null?null:Io(`${r[2]}.${r[3]||"0"}.${r[4]||"0"}`,t)};function wo(e){return String.fromCharCode(parseInt(e.slice(1),16))}function Ro(e){return`%${`00${e.charCodeAt(0).toString(16)}`.slice(-2)}`}function Oo(e){return btoa(encodeURIComponent(e).replace(/%[0-9A-F]{2}/g,wo))}function Ao(e){return decodeURIComponent(Array.from(atob(e),Ro).join(""))}function lr(e){return Oo(JSON.stringify(e))}function No(e){return JSON.parse(Ao(e))}function je(e){return typeof e>"u"}function So(e){return e===null}function fr(e){return So(e)||je(e)}function $o(e){return fr(e)?!1:!je(e.jsonrpc)&&!je(e.id)&&(!je(e.result)||!je(e.error))}function Lo(e){return fr(e)?!1:typeof e=="number"&&Object.values(yt).includes(e)}function vt(e){if(!e)return!0;for(let t in e)if(Object.hasOwnProperty.call(e,t))return!1;return!0}var te={};function To(e,t){return Object.assign(te,t),e}var Mo={"magic-sdk":"magic-sdk","@magic-sdk/react-native":"magic-sdk-rn","@magic-sdk/react-native-bare":"magic-sdk-rn-bare","@magic-sdk/react-native-expo":"magic-sdk-rn-expo"},Ee=class extends Error{constructor(e,t){super(`Magic SDK Error: [${e}] ${t}`),this.code=e,this.rawMessage=t,this.__proto__=Error,Object.setPrototypeOf(this,Ee.prototype)}},Ye=class extends Error{constructor(t){super(),this.__proto__=Error;let r=Number(t?.code);this.rawMessage=t?.message||"Internal error",this.code=Lo(r)?r:yt.InternalError,this.message=`Magic RPC Error: [${this.code}] ${this.rawMessage}`,this.data=t?.data||void 0,Object.setPrototypeOf(this,Ye.prototype)}},_t=class{constructor(t,r){this.code=t,this.rawMessage=r,this.message=`Magic SDK Warning: [${t}] ${r}`}log(){console.warn(this.message)}},dr=class extends Error{constructor(t,r,o,s){super(`Magic Extension Error (${t.name}): [${r}] ${o}`),this.code=r,this.rawMessage=o,this.data=s,this.__proto__=Error,Object.setPrototypeOf(this,dr.prototype)}},er=class{constructor(e,t,r){this.code=t,this.rawMessage=r,this.message=`Magic Extension Warning (${e.name}): [${t}] ${r}`}log(){console.warn(this.message)}};function jo(){return new Ee(_e.MissingApiKey,"Please provide an API key that you acquired from the Magic developer dashboard.")}function Po(){return new Ee(_e.ModalNotReady,"Modal is not ready.")}function Co(){return new Ee(_e.MalformedResponse,"Response from the Magic iframe is malformed.")}function ko(e){return new Ee(_e.ExtensionNotInitialized,`Extensions must be initialized with a Magic SDK instance before \`Extension.${e}\` can be accessed. Do not invoke \`Extension.${e}\` inside an extension constructor.`)}function xo(e){let t=`Some extensions are incompatible with \`${te.sdkName}@${te.version}\`:`;return e.filter(r=>typeof r.compat<"u"&&r.compat!==null).forEach(r=>{let o=r.compat[te.sdkName];typeof o=="string"?t+=`
  - Extension \`${r.name}\` supports version(s) \`${o}\``:o||(t+=`
  - Extension \`${r.name}\` does not support ${te.platform} environments.`)}),new Ee(_e.IncompatibleExtensions,t)}function Do(e){let t=r=>{let o=r+1,s=o%10,u=o%100;return s===1&&u!==11?`${o}st`:s===2&&u!==12?`${o}nd`:s===3&&u!==13?`${o}rd`:`${o}th`};return new Ee(_e.InvalidArgument,`Invalid ${t(e.argument)} argument given to \`${e.procedure}\`.
  Expected: \`${e.expected}\`
  Received: \`${e.received}\``)}function Uo(){return new _t(tt.DuplicateIframe,"Duplicate iframes found.")}function Bo(){return new _t(tt.SyncWeb3Method,"Non-async web3 methods are deprecated in web3 > 1.0 and are not supported by the Magic web3 provider. Please use an async method instead.")}function Fo(){return new _t(tt.ReactNativeEndpointConfiguration,`CUSTOM DOMAINS ARE NOT SUPPORTED WHEN USING MAGIC SDK WITH REACT NATIVE! The \`endpoint\` parameter SHOULD NOT be provided. The Magic \`<iframe>\` is automatically wrapped by a WebView pointed at \`${te.defaultEndpoint}\`. Changing this default behavior will lead to unexpected results and potentially security-threatening bugs.`)}function*Go(){let e=0;for(;;)e<Number.MAX_SAFE_INTEGER?yield++e:e=0}var qo=Go();function hr(){return qo.next().value}var pr=Symbol("Payload pre-processed by Magic SDK");function vr(e){return Object.defineProperty(e,pr,{value:!0,enumerable:!1}),e}function zo(e){return!!e[pr]}function Ke(e){var t,r,o;return zo(e)||(e.jsonrpc=(t=e.jsonrpc)!=null?t:"2.0",e.id=hr(),e.method=(r=e.method)!=null?r:"noop",e.params=(o=e.params)!=null?o:[],vr(e)),e}function Q(e,t=[]){return vr({params:t,method:e,jsonrpc:"2.0",id:hr()})}var Et=class{constructor(e){e instanceof Et?(this._jsonrpc=e.payload.jsonrpc,this._id=e.payload.id,this._result=e.payload.result,this._error=e.payload.error):$o(e)?(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=e.result,this._error=e.error):(this._jsonrpc=e.jsonrpc,this._id=e.id,this._result=void 0,this._error=void 0)}applyError(e){return this._error=e,this}applyResult(e){return this._result=e,this}get hasError(){return typeof this._error<"u"&&this._error!==null}get hasResult(){return typeof this._result<"u"}get payload(){return{jsonrpc:this._jsonrpc,id:this._id,result:this._result,error:this._error}}},Ho=kn(xn()),Wo=class extends Ho.default{};function mr(){let e=new Wo;return{emitter:e,createChainingEmitterMethod:(t,r)=>(...o)=>(e[t].apply(e,o),r),createBoundEmitterMethod:t=>(...r)=>e[t].apply(e,r)}}var yr=Symbol("isPromiEvent");function Xo(e){return!!e[yr]}function gr(e){let t=_r(e),{createBoundEmitterMethod:r,createChainingEmitterMethod:o}=mr(),s=Symbol("Promise.then"),u=Symbol("Promise.catch"),E=Symbol("Promise.finally"),h=(g,p)=>(...N)=>{let $=p[g].apply(p,N);return y($)},y=g=>Object.assign(g,{[yr]:!0,[s]:g[s]||g.then,[u]:g[u]||g.catch,[E]:g[E]||g.finally,then:h(s,g),catch:h(u,g),finally:h(E,g),on:o("on",g),once:o("once",g),addListener:o("addListener",g),off:o("off",g),removeListener:o("removeListener",g),removeAllListeners:o("removeAllListeners",g),emit:r("emit"),eventNames:r("eventNames"),listeners:r("listeners"),listenerCount:r("listenerCount")}),v=y(t.then(g=>(v.emit("done",g),v.emit("settled"),g),g=>{throw v.emit("error",g),v.emit("settled"),g}));return v}function _r(e){return new Promise((t,r)=>{let o=e(t,r);Promise.resolve(o).catch(r)})}var Ie=class{constructor(e){this.sdk=e}get overlay(){return this.sdk.overlay}request(e){let t=this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,Ke(e)),r=gr((s,u)=>{t.then(E=>{if(o(),E.hasError)u(new Ye(E.payload.error));else if(E.hasResult)s(E.payload.result);else throw Co()}).catch(E=>{o(),u(E)})}),o=this.overlay.on(Oe.MAGIC_HANDLE_EVENT,s=>{var u;let{response:E}=s.data;if(E.id===e.id&&((u=E.result)!=null&&u.event)){let{event:h,params:y=[]}=E.result;r.emit(h,...y)}});return r}createIntermediaryEvent(e,t){return r=>{let o=Q(z.IntermediaryEvent,[{payloadId:t,eventType:e,args:r}]);this.request(o)}}},Vo=class extends Ie{loginWithMagicLink(e){let{email:t,showUI:r=!0,redirectURI:o}=e,s=Q(this.sdk.testMode?z.LoginWithMagicLinkTestMode:z.LoginWithMagicLink,[{email:t,showUI:r,redirectURI:o}]);return this.request(s)}loginWithSMS(e){let{phoneNumber:t}=e,r=Q(this.sdk.testMode?z.LoginWithSmsTestMode:z.LoginWithSms,[{phoneNumber:t,showUI:!0}]);return this.request(r)}loginWithEmailOTP(e){let{email:t,showUI:r}=e,o=Q(this.sdk.testMode?z.LoginWithEmailOTPTestMode:z.LoginWithEmailOTP,[{email:t,showUI:r}]);if(!r){let s=this.request(o);return s&&s.on("otp-input-sent",u=>{this.createIntermediaryEvent("verify-email-otp",o.id)(u)}),s}return this.request(o)}loginWithCredential(e){let t=e??"";if(!e&&te.platform==="web"){t=window.location.search;let o=window.location.origin+window.location.pathname;window.history.replaceState(null,"",o)}let r=Q(this.sdk.testMode?z.LoginWithCredentialTestMode:z.LoginWithCredential,[t]);return this.request(r)}},Er={};Pn(Er,{clear:()=>Yo,getItem:()=>Ce,iterate:()=>Zo,key:()=>Jo,keys:()=>Qo,length:()=>Ko,removeItem:()=>mt,setItem:()=>Je});var qe;function me(e){return(...t)=>de(this,null,function*(){return qe||(qe=yield te.configureStorage()),yield qe.ready(),qe[e](...t)})}var Ce=me("getItem"),Je=me("setItem"),mt=me("removeItem"),Yo=me("clear"),Ko=me("length"),Jo=me("key"),Qo=me("keys"),Zo=me("iterate");function ei(){let e=window.crypto.getRandomValues(new Uint8Array(16));e[6]=e[6]&15|64,e[8]=e[8]&191|128;let t="";return t+=e[0].toString(16),t+=e[1].toString(16),t+=e[2].toString(16),t+=e[3].toString(16),t+="-",t+=e[4].toString(16),t+=e[5].toString(16),t+="-",t+=e[6].toString(16),t+=e[7].toString(16),t+="-",t+=e[8].toString(16),t+=e[9].toString(16),t+="-",t+=e[10].toString(16),t+=e[11].toString(16),t+=e[12].toString(16),t+=e[13].toString(16),t+=e[14].toString(16),t+=e[15].toString(16),t}var It="STORE_KEY_PRIVATE_KEY",Qe="STORE_KEY_PUBLIC_JWK",bt="ECDSA",Ir="P-256",ti={name:bt,namedCurve:Ir},ri={name:bt,namedCurve:Ir};function br(){mt(Qe),mt(It)}function ni(){return de(this,null,function*(){let e=yield oi();if(!e){console.info("unable to create public key or webcrypto is unsupported");return}let{subtle:t}=window.crypto,r=yield Ce(It);if(!r||!t){console.info("unable to find private key or webcrypto unsupported");return}let o={iat:Math.floor(new Date().getTime()/1e3),jti:ei()},s={typ:"dpop+jwt",alg:"ES256",jwk:e},u={protected:tr(JSON.stringify(s)),claims:tr(JSON.stringify(o))},E=si(`${u.protected}.${u.claims}`),h={name:bt,hash:{name:"SHA-256"}},y=ci(new Uint8Array(yield t.sign(h,r,E)));return`${u.protected}.${u.claims}.${y}`})}function oi(){return de(this,null,function*(){if(!ai()){console.info("webcrypto is not supported");return}return(yield Ce(Qe))||(yield ii()),Ce(Qe)})}function ii(){return de(this,null,function*(){let e=null,{subtle:t}=window.crypto,r=yield t.generateKey(ti,!0,["sign"]),o=yield t.exportKey("jwk",r.privateKey);e=yield t.exportKey("jwk",r.publicKey);let s=yield t.importKey("jwk",o,ri,!1,["sign"]);yield Je(It,s),yield Je(Qe,e)})}function ai(){let e=typeof window<"u"&&!!window.crypto,t=e&&!!window.crypto.subtle;return e&&t}function tr(e){return wr(ui(e))}function si(e){return new TextEncoder().encode(e)}function wr(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+/g,"")}function ui(e){return encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(t,r)=>String.fromCharCode(parseInt(r,16)))}function ci(e){let t="";return e.forEach(r=>{t+=String.fromCharCode(r)}),wr(t)}var li=class extends Ie{getIdToken(t){let r=Q(this.sdk.testMode?z.GetIdTokenTestMode:z.GetIdToken,[t]);return this.request(r)}generateIdToken(t){let r=Q(this.sdk.testMode?z.GenerateIdTokenTestMode:z.GenerateIdToken,[t]);return this.request(r)}getMetadata(){let t=Q(this.sdk.testMode?z.GetMetadataTestMode:z.GetMetadata);return this.request(t)}updateEmail(t){let{email:r,showUI:o=!0}=t,s=Q(this.sdk.testMode?z.UpdateEmailTestMode:z.UpdateEmail,[{email:r,showUI:o}]);return this.request(s)}isLoggedIn(){let t=Q(this.sdk.testMode?z.IsLoggedInTestMode:z.IsLoggedIn);return this.request(t)}logout(){br();let t=Q(this.sdk.testMode?z.LogoutTestMode:z.Logout);return this.request(t)}showSettings(){let t=Q(this.sdk.testMode?z.UserSettingsTestMode:z.UserSettings);return this.request(t)}updatePhoneNumber(){let t=Q(this.sdk.testMode?z.UpdatePhoneNumberTestMode:z.UpdatePhoneNumber);return this.request(t)}recoverAccount(t){let r=Q(this.sdk.testMode?z.RecoverAccountTestMode:z.RecoverAccount,[t]);return this.request(r)}},fi=class extends Ie{connectWithUI(){let e=Q(z.RequestAccounts);return this.request(e)}showUI(){let e=Q(z.ShowUI);return this.request(e)}getInfo(){let e=Q(z.GetInfo);return this.request(e)}requestUserInfoWithUI(e){let t=Q(z.RequestUserInfoWithUI,e?[e]:[]);return this.request(t)}disconnect(){br();let e=Q(z.Disconnect);return this.request(e)}},{createBoundEmitterMethod:ze,createChainingEmitterMethod:Re}=mr(),di=class extends Ie{constructor(){super(...arguments),this.isMagic=!0,this.on=Re("on",this),this.once=Re("once",this),this.addListener=Re("addListener",this),this.off=Re("off",this),this.removeListener=Re("removeListener",this),this.removeAllListeners=Re("removeAllListeners",this),this.emit=ze("emit"),this.eventNames=ze("eventNames"),this.listeners=ze("listeners"),this.listenerCount=ze("listenerCount")}sendAsync(e,t){if(!t)throw Do({procedure:"Magic.rpcProvider.sendAsync",argument:1,expected:"function",received:t===null?"null":typeof t});if(Array.isArray(e))this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,e.map(r=>{let o=Ke(r);return this.prefixPayloadMethodForTestMode(o),o})).then(r=>{t(null,r.map(o=>Mn(cr({},o.payload),{error:o.hasError?new Ye(o.payload.error):null})))});else{let r=Ke(e);this.prefixPayloadMethodForTestMode(r),this.overlay.post(Ve.MAGIC_HANDLE_REQUEST,r).then(o=>{t(o.hasError?new Ye(o.payload.error):null,o.payload)})}}send(e,t){if(typeof e=="string"){let o=Q(e,Array.isArray(t)?t:[]);return this.request(o)}if(Array.isArray(e)||t){this.sendAsync(e,t);return}let r=Bo();return r.log(),new Et(e).applyError({code:-32603,message:r.rawMessage}).payload}enable(){let e=Q("eth_accounts");return this.request(e)}request(e){return this.prefixPayloadMethodForTestMode(e),super.request(e)}prefixPayloadMethodForTestMode(e){let t="testMode/eth/";this.sdk.testMode&&(e.method=`${t}${e.method}`)}};function Ze(e,t){return t?new URL(e,t):new URL(e)}var rr=["request","overlay","sdk"];function hi(e){let t=Object.getPrototypeOf(e),r=[t];for(;t!==Ie.prototype;)t=Object.getPrototypeOf(t),r.push(t);return r}var Rr=class extends Ie{constructor(){super(void 0),this.__sdk_access_field_descriptors__=new Map,this.__is_initialized__=!1,this.utils={createPromiEvent:gr,isPromiEvent:Xo,encodeJSON:lr,decodeJSON:No,createJsonRpcRequestPayload:Q,standardizeJsonRpcRequestPayload:Ke,storage:Er};let t=[this,...hi(this)];rr.forEach(r=>{let o=t.map(h=>Object.getOwnPropertyDescriptor(h,r)),s=o.findIndex(h=>!!h),u=s>0,E=o[s];E&&(this.__sdk_access_field_descriptors__.set(r,{descriptor:E,isPrototypeField:u}),Object.defineProperty(this,r,{configurable:!0,get:()=>{throw ko(r)}}))})}init(t){this.__is_initialized__||(rr.forEach(r=>{if(this.__sdk_access_field_descriptors__.has(r)){let{descriptor:o,isPrototypeField:s}=this.__sdk_access_field_descriptors__.get(r);s?delete this[r]:Object.defineProperty(this,r,o)}}),this.sdk=t,this.__is_initialized__=!0)}createDeprecationWarning(t){let{method:r,removalVersion:o,useInstead:s}=t,u=s?` Use \`${s}\` instead.`:"",E=`\`${r}\` will be removed from this Extension in version \`${o}\`.${u}`;return new er(this,"DEPRECATION_NOTICE",E)}createWarning(t,r){return new er(this,t,r)}createError(t,r,o){return new dr(this,t,r,o)}},pi=class extends Rr{},Ne=class extends Rr{};Ne.Internal=pi,Ne.Anonymous="anonymous extension";var vi=class extends Ie{purchase(e){let t=Q(z.NFTPurchase,[e]);return this.request(t)}};function nr(e){return e.compat&&e.compat[te.sdkName]!=null?typeof e.compat[te.sdkName]=="string"?go(bo(te.version),e.compat[te.sdkName]):!!e.compat[te.sdkName]:!0}function mi(e){var t;let r=(t=e?.extensions)!=null?t:[],o={},s=[];if(Array.isArray(r)?r.forEach(u=>{nr(u)?(u.init(this),(u.name||u.name!==Ne.Anonymous)&&(this[u.name]=u),u instanceof Ne.Internal&&(vt(u.config)||(o[u.name]=u.config))):s.push(u)}):Object.keys(r).forEach(u=>{if(nr(r[u])){r[u].init(this);let E=r[u];this[u]=E,E instanceof Ne.Internal&&(vt(E.config)||(o[r[u].name]=E.config))}else s.push(r[u])}),s.length)throw xo(s);return o}var We=class{constructor(t,r){this.apiKey=t;var o;if(!t)throw jo();te.platform==="react-native"&&r?.endpoint&&Fo().log();let{defaultEndpoint:s,version:u}=te;this.testMode=!!(r!=null&&r.testMode),this.endpoint=Ze((o=r?.endpoint)!=null?o:s).origin,this.auth=new Vo(this),this.user=new li(this),this.wallet=new fi(this),this.nft=new vi(this),this.rpcProvider=new di(this);let E=mi.call(this,r);this.parameters=lr(cr({API_KEY:this.apiKey,DOMAIN_ORIGIN:window.location?window.location.origin:"",ETH_NETWORK:r?.network,host:Ze(this.endpoint).host,sdk:Mo[te.sdkName],version:u,ext:vt(E)?void 0:E,locale:r?.locale||"en_US"},te.bundleId?{bundleId:te.bundleId}:{}))}get overlay(){if(!We.__overlays__.has(this.parameters)){let t=new te.ViewController(this.endpoint,this.parameters);t.init(),We.__overlays__.set(this.parameters,t)}return We.__overlays__.get(this.parameters)}preload(){return de(this,null,function*(){yield this.overlay.ready})}},Or=We;Or.__overlays__=new Map;function yi(e,t){return t&&Array.isArray(e)?e.find(r=>r.id===t):e}function gi(e,t){var r;let o=(r=t.data.response)==null?void 0:r.id,s=yi(e,o);if(o&&s){let u=new Et(s).applyResult(t.data.response.result).applyError(t.data.response.error);return{id:o,response:u}}return{}}function _i(e,t){return de(this,null,function*(){let r=yield Ce("rt"),o;if(te.platform==="web")try{o=yield ni()}catch(s){console.error("webcrypto error",s)}return o?r?{msgType:e,payload:t,jwt:o,rt:r}:{msgType:e,payload:t,jwt:o}:{msgType:e,payload:t}})}function Ei(e){return de(this,null,function*(){!e.data.rt||(yield Je("rt",e.data.rt))})}var Ii=class{constructor(e,t){this.endpoint=e,this.parameters=t,this.messageHandlers=new Set,this.ready=this.waitForReady(),this.listen()}post(e,t){return de(this,null,function*(){return _r(r=>de(this,null,function*(){yield this.ready;let o=[],s=Array.isArray(t)?t.map(y=>y.id):[],u=yield _i(`${e}-${this.parameters}`,t);yield this._post(u);let E=y=>v=>{let{id:g,response:p}=gi(t,v);Ei(v),g&&p&&Array.isArray(t)&&s.includes(g)?(o.push(p),o.length===t.length&&(y(),r(o))):g&&p&&!Array.isArray(t)&&g===t.id&&(y(),r(p))},h=this.on(Oe.MAGIC_HANDLE_RESPONSE,E(()=>h()))}))})}on(e,t){let r=t.bind(window),o=s=>{s.data.msgType===`${e}-${this.parameters}`&&r(s)};return this.messageHandlers.add(o),()=>this.messageHandlers.delete(o)}waitForReady(){return new Promise(e=>{this.on(Oe.MAGIC_OVERLAY_READY,()=>e())})}listen(){this.on(Oe.MAGIC_HIDE_OVERLAY,()=>{this.hideOverlay()}),this.on(Oe.MAGIC_SHOW_OVERLAY,()=>{this.showOverlay()})}},bi=Object.create,Ar=Object.defineProperty,wi=Object.getOwnPropertyDescriptor,Ri=Object.getOwnPropertyNames,Oi=Object.getPrototypeOf,Ai=Object.prototype.hasOwnProperty,He=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')}),Nr=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ni=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Ri(t))!Ai.call(e,s)&&s!==r&&Ar(e,s,{get:()=>t[s],enumerable:!(o=wi(t,s))||o.enumerable});return e},Sr=(e,t,r)=>(r=e!=null?bi(Oi(e)):{},Ni(!e||!e.__esModule?Ar(r,"default",{value:e,enumerable:!0}):r,e)),Xe=(e,t,r)=>new Promise((o,s)=>{var u=y=>{try{h(r.next(y))}catch(v){s(v)}},E=y=>{try{h(r.throw(y))}catch(v){s(v)}},h=y=>y.done?o(y.value):Promise.resolve(y.value).then(u,E);h((r=r.apply(e,t)).next())}),Si=Nr((e,t)=>{(function(r){if(typeof e=="object"&&typeof t<"u")t.exports=r();else if(typeof define=="function"&&define.amd)define([],r);else{var o;typeof window<"u"?o=window:typeof global<"u"?o=global:typeof self<"u"?o=self:o=this,o.localforage=r()}})(function(){return(function r(o,s,u){function E(v,g){if(!s[v]){if(!o[v]){var p=typeof He=="function"&&He;if(!g&&p)return p(v,!0);if(h)return h(v,!0);var N=new Error("Cannot find module '"+v+"'");throw N.code="MODULE_NOT_FOUND",N}var $=s[v]={exports:{}};o[v][0].call($.exports,function(P){var T=o[v][1][P];return E(T||P)},$,$.exports,r,o,s,u)}return s[v].exports}for(var h=typeof He=="function"&&He,y=0;y<u.length;y++)E(u[y]);return E})({1:[function(r,o,s){(function(u){var E=u.MutationObserver||u.WebKitMutationObserver,h;if(E){var y=0,v=new E(P),g=u.document.createTextNode("");v.observe(g,{characterData:!0}),h=function(){g.data=y=++y%2}}else if(!u.setImmediate&&typeof u.MessageChannel<"u"){var p=new u.MessageChannel;p.port1.onmessage=P,h=function(){p.port2.postMessage(0)}}else"document"in u&&"onreadystatechange"in u.document.createElement("script")?h=function(){var d=u.document.createElement("script");d.onreadystatechange=function(){P(),d.onreadystatechange=null,d.parentNode.removeChild(d),d=null},u.document.documentElement.appendChild(d)}:h=function(){setTimeout(P,0)};var N,$=[];function P(){N=!0;for(var d,S,j=$.length;j;){for(S=$,$=[],d=-1;++d<j;)S[d]();j=$.length}N=!1}o.exports=T;function T(d){$.push(d)===1&&!N&&h()}}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(r,o,s){var u=r(1);function E(){}var h={},y=["REJECTED"],v=["FULFILLED"],g=["PENDING"];o.exports=p;function p(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=g,this.queue=[],this.outcome=void 0,I!==E&&T(this,I)}p.prototype.catch=function(I){return this.then(null,I)},p.prototype.then=function(I,B){if(typeof I!="function"&&this.state===v||typeof B!="function"&&this.state===y)return this;var k=new this.constructor(E);if(this.state!==g){var U=this.state===v?I:B;$(k,U,this.outcome)}else this.queue.push(new N(k,I,B));return k};function N(I,B,k){this.promise=I,typeof B=="function"&&(this.onFulfilled=B,this.callFulfilled=this.otherCallFulfilled),typeof k=="function"&&(this.onRejected=k,this.callRejected=this.otherCallRejected)}N.prototype.callFulfilled=function(I){h.resolve(this.promise,I)},N.prototype.otherCallFulfilled=function(I){$(this.promise,this.onFulfilled,I)},N.prototype.callRejected=function(I){h.reject(this.promise,I)},N.prototype.otherCallRejected=function(I){$(this.promise,this.onRejected,I)};function $(I,B,k){u(function(){var U;try{U=B(k)}catch(H){return h.reject(I,H)}U===I?h.reject(I,new TypeError("Cannot resolve promise with itself")):h.resolve(I,U)})}h.resolve=function(I,B){var k=d(P,B);if(k.status==="error")return h.reject(I,k.value);var U=k.value;if(U)T(I,U);else{I.state=v,I.outcome=B;for(var H=-1,Y=I.queue.length;++H<Y;)I.queue[H].callFulfilled(B)}return I},h.reject=function(I,B){I.state=y,I.outcome=B;for(var k=-1,U=I.queue.length;++k<U;)I.queue[k].callRejected(B);return I};function P(I){var B=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof B=="function")return function(){B.apply(I,arguments)}}function T(I,B){var k=!1;function U(oe){k||(k=!0,h.reject(I,oe))}function H(oe){k||(k=!0,h.resolve(I,oe))}function Y(){B(H,U)}var Z=d(Y);Z.status==="error"&&U(Z.value)}function d(I,B){var k={};try{k.value=I(B),k.status="success"}catch(U){k.status="error",k.value=U}return k}p.resolve=S;function S(I){return I instanceof this?I:h.resolve(new this(E),I)}p.reject=j;function j(I){var B=new this(E);return h.reject(B,I)}p.all=M;function M(I){var B=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=I.length,U=!1;if(!k)return this.resolve([]);for(var H=new Array(k),Y=0,Z=-1,oe=new this(E);++Z<k;)ue(I[Z],Z);return oe;function ue(fe,he){B.resolve(fe).then(ye,function(le){U||(U=!0,h.reject(oe,le))});function ye(le){H[he]=le,++Y===k&&!U&&(U=!0,h.resolve(oe,H))}}}p.race=F;function F(I){var B=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var k=I.length,U=!1;if(!k)return this.resolve([]);for(var H=-1,Y=new this(E);++H<k;)Z(I[H]);return Y;function Z(oe){B.resolve(oe).then(function(ue){U||(U=!0,h.resolve(Y,ue))},function(ue){U||(U=!0,h.reject(Y,ue))})}}},{1:1}],3:[function(r,o,s){(function(u){typeof u.Promise!="function"&&(u.Promise=r(2))}).call(this,typeof global<"u"?global:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(r,o,s){var u=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n};function E(n,i){if(!(n instanceof i))throw new TypeError("Cannot call a class as a function")}function h(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var y=h();function v(){try{if(!y||!y.open)return!1;var n=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),i=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!n||i)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function g(n,i){n=n||[],i=i||{};try{return new Blob(n,i)}catch(f){if(f.name!=="TypeError")throw f;for(var a=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,l=new a,c=0;c<n.length;c+=1)l.append(n[c]);return l.getBlob(i.type)}}typeof Promise>"u"&&r(3);var p=Promise;function N(n,i){i&&n.then(function(a){i(null,a)},function(a){i(a)})}function $(n,i,a){typeof i=="function"&&n.then(i),typeof a=="function"&&n.catch(a)}function P(n){return typeof n!="string"&&(console.warn(n+" used as a key, but it is not a string."),n=String(n)),n}function T(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var d="local-forage-detect-blob-support",S=void 0,j={},M=Object.prototype.toString,F="readonly",I="readwrite";function B(n){for(var i=n.length,a=new ArrayBuffer(i),l=new Uint8Array(a),c=0;c<i;c++)l[c]=n.charCodeAt(c);return a}function k(n){return new p(function(i){var a=n.transaction(d,I),l=g([""]);a.objectStore(d).put(l,"key"),a.onabort=function(c){c.preventDefault(),c.stopPropagation(),i(!1)},a.oncomplete=function(){var c=navigator.userAgent.match(/Chrome\/(\d+)/),f=navigator.userAgent.match(/Edge\//);i(f||!c||parseInt(c[1],10)>=43)}}).catch(function(){return!1})}function U(n){return typeof S=="boolean"?p.resolve(S):k(n).then(function(i){return S=i,S})}function H(n){var i=j[n.name],a={};a.promise=new p(function(l,c){a.resolve=l,a.reject=c}),i.deferredOperations.push(a),i.dbReady?i.dbReady=i.dbReady.then(function(){return a.promise}):i.dbReady=a.promise}function Y(n){var i=j[n.name],a=i.deferredOperations.pop();if(a)return a.resolve(),a.promise}function Z(n,i){var a=j[n.name],l=a.deferredOperations.pop();if(l)return l.reject(i),l.promise}function oe(n,i){return new p(function(a,l){if(j[n.name]=j[n.name]||D(),n.db)if(i)H(n),n.db.close();else return a(n.db);var c=[n.name];i&&c.push(n.version);var f=y.open.apply(y,c);i&&(f.onupgradeneeded=function(_){var b=f.result;try{b.createObjectStore(n.storeName),_.oldVersion<=1&&b.createObjectStore(d)}catch(A){if(A.name==="ConstraintError")console.warn('The database "'+n.name+'" has been upgraded from version '+_.oldVersion+" to version "+_.newVersion+', but the storage "'+n.storeName+'" already exists.');else throw A}}),f.onerror=function(_){_.preventDefault(),l(f.error)},f.onsuccess=function(){var _=f.result;_.onversionchange=function(b){b.target.close()},a(_),Y(n)}})}function ue(n){return oe(n,!1)}function fe(n){return oe(n,!0)}function he(n,i){if(!n.db)return!0;var a=!n.db.objectStoreNames.contains(n.storeName),l=n.version<n.db.version,c=n.version>n.db.version;if(l&&(n.version!==i&&console.warn('The database "'+n.name+`" can't be downgraded from version `+n.db.version+" to version "+n.version+"."),n.version=n.db.version),c||a){if(a){var f=n.db.version+1;f>n.version&&(n.version=f)}return!0}return!1}function ye(n){return new p(function(i,a){var l=new FileReader;l.onerror=a,l.onloadend=function(c){var f=btoa(c.target.result||"");i({__local_forage_encoded_blob:!0,data:f,type:n.type})},l.readAsBinaryString(n)})}function le(n){var i=B(atob(n.data));return g([i],{type:n.type})}function m(n){return n&&n.__local_forage_encoded_blob}function w(n){var i=this,a=i._initReady().then(function(){var l=j[i._dbInfo.name];if(l&&l.dbReady)return l.dbReady});return $(a,n,n),a}function L(n){H(n);for(var i=j[n.name],a=i.forages,l=0;l<a.length;l++){var c=a[l];c._dbInfo.db&&(c._dbInfo.db.close(),c._dbInfo.db=null)}return n.db=null,ue(n).then(function(f){return n.db=f,he(n)?fe(n):f}).then(function(f){n.db=i.db=f;for(var _=0;_<a.length;_++)a[_]._dbInfo.db=f}).catch(function(f){throw Z(n,f),f})}function C(n,i,a,l){l===void 0&&(l=1);try{var c=n.db.transaction(n.storeName,i);a(null,c)}catch(f){if(l>0&&(!n.db||f.name==="InvalidStateError"||f.name==="NotFoundError"))return p.resolve().then(function(){if(!n.db||f.name==="NotFoundError"&&!n.db.objectStoreNames.contains(n.storeName)&&n.version<=n.db.version)return n.db&&(n.version=n.db.version+1),fe(n)}).then(function(){return L(n).then(function(){C(n,i,a,l-1)})}).catch(a);a(f)}}function D(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function G(n){var i=this,a={db:null};if(n)for(var l in n)a[l]=n[l];var c=j[a.name];c||(c=D(),j[a.name]=c),c.forages.push(i),i._initReady||(i._initReady=i.ready,i.ready=w);var f=[];function _(){return p.resolve()}for(var b=0;b<c.forages.length;b++){var A=c.forages[b];A!==i&&f.push(A._initReady().catch(_))}var O=c.forages.slice(0);return p.all(f).then(function(){return a.db=c.db,ue(a)}).then(function(R){return a.db=R,he(a,i._defaultConfig.version)?fe(a):R}).then(function(R){a.db=c.db=R,i._dbInfo=a;for(var x=0;x<O.length;x++){var q=O[x];q!==i&&(q._dbInfo.db=a.db,q._dbInfo.version=a.version)}})}function K(n,i){var a=this;n=P(n);var l=new p(function(c,f){a.ready().then(function(){C(a._dbInfo,F,function(_,b){if(_)return f(_);try{var A=b.objectStore(a._dbInfo.storeName),O=A.get(n);O.onsuccess=function(){var R=O.result;R===void 0&&(R=null),m(R)&&(R=le(R)),c(R)},O.onerror=function(){f(O.error)}}catch(R){f(R)}})}).catch(f)});return N(l,i),l}function ie(n,i){var a=this,l=new p(function(c,f){a.ready().then(function(){C(a._dbInfo,F,function(_,b){if(_)return f(_);try{var A=b.objectStore(a._dbInfo.storeName),O=A.openCursor(),R=1;O.onsuccess=function(){var x=O.result;if(x){var q=x.value;m(q)&&(q=le(q));var V=n(q,x.key,R++);V!==void 0?c(V):x.continue()}else c()},O.onerror=function(){f(O.error)}}catch(x){f(x)}})}).catch(f)});return N(l,i),l}function be(n,i,a){var l=this;n=P(n);var c=new p(function(f,_){var b;l.ready().then(function(){return b=l._dbInfo,M.call(i)==="[object Blob]"?U(b.db).then(function(A){return A?i:ye(i)}):i}).then(function(A){C(l._dbInfo,I,function(O,R){if(O)return _(O);try{var x=R.objectStore(l._dbInfo.storeName);A===null&&(A=void 0);var q=x.put(A,n);R.oncomplete=function(){A===void 0&&(A=null),f(A)},R.onabort=R.onerror=function(){var V=q.error?q.error:q.transaction.error;_(V)}}catch(V){_(V)}})}).catch(_)});return N(c,a),c}function ge(n,i){var a=this;n=P(n);var l=new p(function(c,f){a.ready().then(function(){C(a._dbInfo,I,function(_,b){if(_)return f(_);try{var A=b.objectStore(a._dbInfo.storeName),O=A.delete(n);b.oncomplete=function(){c()},b.onerror=function(){f(O.error)},b.onabort=function(){var R=O.error?O.error:O.transaction.error;f(R)}}catch(R){f(R)}})}).catch(f)});return N(l,i),l}function $e(n){var i=this,a=new p(function(l,c){i.ready().then(function(){C(i._dbInfo,I,function(f,_){if(f)return c(f);try{var b=_.objectStore(i._dbInfo.storeName),A=b.clear();_.oncomplete=function(){l()},_.onabort=_.onerror=function(){var O=A.error?A.error:A.transaction.error;c(O)}}catch(O){c(O)}})}).catch(c)});return N(a,n),a}function jr(n){var i=this,a=new p(function(l,c){i.ready().then(function(){C(i._dbInfo,F,function(f,_){if(f)return c(f);try{var b=_.objectStore(i._dbInfo.storeName),A=b.count();A.onsuccess=function(){l(A.result)},A.onerror=function(){c(A.error)}}catch(O){c(O)}})}).catch(c)});return N(a,n),a}function Pr(n,i){var a=this,l=new p(function(c,f){if(n<0){c(null);return}a.ready().then(function(){C(a._dbInfo,F,function(_,b){if(_)return f(_);try{var A=b.objectStore(a._dbInfo.storeName),O=!1,R=A.openKeyCursor();R.onsuccess=function(){var x=R.result;if(!x){c(null);return}n===0||O?c(x.key):(O=!0,x.advance(n))},R.onerror=function(){f(R.error)}}catch(x){f(x)}})}).catch(f)});return N(l,i),l}function Cr(n){var i=this,a=new p(function(l,c){i.ready().then(function(){C(i._dbInfo,F,function(f,_){if(f)return c(f);try{var b=_.objectStore(i._dbInfo.storeName),A=b.openKeyCursor(),O=[];A.onsuccess=function(){var R=A.result;if(!R){l(O);return}O.push(R.key),R.continue()},A.onerror=function(){c(A.error)}}catch(R){c(R)}})}).catch(c)});return N(a,n),a}function kr(n,i){i=T.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var l=this,c;if(!n.name)c=p.reject("Invalid arguments");else{var f=n.name===a.name&&l._dbInfo.db,_=f?p.resolve(l._dbInfo.db):ue(n).then(function(b){var A=j[n.name],O=A.forages;A.db=b;for(var R=0;R<O.length;R++)O[R]._dbInfo.db=b;return b});n.storeName?c=_.then(function(b){if(b.objectStoreNames.contains(n.storeName)){var A=b.version+1;H(n);var O=j[n.name],R=O.forages;b.close();for(var x=0;x<R.length;x++){var q=R[x];q._dbInfo.db=null,q._dbInfo.version=A}var V=new p(function(W,ee){var J=y.open(n.name,A);J.onerror=function(ce){var lt=J.result;lt.close(),ee(ce)},J.onupgradeneeded=function(){var ce=J.result;ce.deleteObjectStore(n.storeName)},J.onsuccess=function(){var ce=J.result;ce.close(),W(ce)}});return V.then(function(W){O.db=W;for(var ee=0;ee<R.length;ee++){var J=R[ee];J._dbInfo.db=W,Y(J._dbInfo)}}).catch(function(W){throw(Z(n,W)||p.resolve()).catch(function(){}),W})}}):c=_.then(function(b){H(n);var A=j[n.name],O=A.forages;b.close();for(var R=0;R<O.length;R++){var x=O[R];x._dbInfo.db=null}var q=new p(function(V,W){var ee=y.deleteDatabase(n.name);ee.onerror=function(){var J=ee.result;J&&J.close(),W(ee.error)},ee.onblocked=function(){console.warn('dropInstance blocked for database "'+n.name+'" until all open connections are closed')},ee.onsuccess=function(){var J=ee.result;J&&J.close(),V(J)}});return q.then(function(V){A.db=V;for(var W=0;W<O.length;W++){var ee=O[W];Y(ee._dbInfo)}}).catch(function(V){throw(Z(n,V)||p.resolve()).catch(function(){}),V})})}return N(c,i),c}var xr={_driver:"asyncStorage",_initStorage:G,_support:v(),iterate:ie,getItem:K,setItem:be,removeItem:ge,clear:$e,length:jr,key:Pr,keys:Cr,dropInstance:kr};function Dr(){return typeof openDatabase=="function"}var pe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Ur="~~local_forage_type~",Rt=/^~~local_forage_type~([^~]+)~/,De="__lfsc__:",nt=De.length,ot="arbf",it="blob",Ot="si08",At="ui08",Nt="uic8",St="si16",$t="si32",Lt="ur16",Tt="ui32",Mt="fl32",jt="fl64",Pt=nt+ot.length,Ct=Object.prototype.toString;function kt(n){var i=n.length*.75,a=n.length,l,c=0,f,_,b,A;n[n.length-1]==="="&&(i--,n[n.length-2]==="="&&i--);var O=new ArrayBuffer(i),R=new Uint8Array(O);for(l=0;l<a;l+=4)f=pe.indexOf(n[l]),_=pe.indexOf(n[l+1]),b=pe.indexOf(n[l+2]),A=pe.indexOf(n[l+3]),R[c++]=f<<2|_>>4,R[c++]=(_&15)<<4|b>>2,R[c++]=(b&3)<<6|A&63;return O}function at(n){var i=new Uint8Array(n),a="",l;for(l=0;l<i.length;l+=3)a+=pe[i[l]>>2],a+=pe[(i[l]&3)<<4|i[l+1]>>4],a+=pe[(i[l+1]&15)<<2|i[l+2]>>6],a+=pe[i[l+2]&63];return i.length%3===2?a=a.substring(0,a.length-1)+"=":i.length%3===1&&(a=a.substring(0,a.length-2)+"=="),a}function Br(n,i){var a="";if(n&&(a=Ct.call(n)),n&&(a==="[object ArrayBuffer]"||n.buffer&&Ct.call(n.buffer)==="[object ArrayBuffer]")){var l,c=De;n instanceof ArrayBuffer?(l=n,c+=ot):(l=n.buffer,a==="[object Int8Array]"?c+=Ot:a==="[object Uint8Array]"?c+=At:a==="[object Uint8ClampedArray]"?c+=Nt:a==="[object Int16Array]"?c+=St:a==="[object Uint16Array]"?c+=Lt:a==="[object Int32Array]"?c+=$t:a==="[object Uint32Array]"?c+=Tt:a==="[object Float32Array]"?c+=Mt:a==="[object Float64Array]"?c+=jt:i(new Error("Failed to get type for BinaryArray"))),i(c+at(l))}else if(a==="[object Blob]"){var f=new FileReader;f.onload=function(){var _=Ur+n.type+"~"+at(this.result);i(De+it+_)},f.readAsArrayBuffer(n)}else try{i(JSON.stringify(n))}catch(_){console.error("Couldn't convert value into a JSON string: ",n),i(null,_)}}function Fr(n){if(n.substring(0,nt)!==De)return JSON.parse(n);var i=n.substring(Pt),a=n.substring(nt,Pt),l;if(a===it&&Rt.test(i)){var c=i.match(Rt);l=c[1],i=i.substring(c[0].length)}var f=kt(i);switch(a){case ot:return f;case it:return g([f],{type:l});case Ot:return new Int8Array(f);case At:return new Uint8Array(f);case Nt:return new Uint8ClampedArray(f);case St:return new Int16Array(f);case Lt:return new Uint16Array(f);case $t:return new Int32Array(f);case Tt:return new Uint32Array(f);case Mt:return new Float32Array(f);case jt:return new Float64Array(f);default:throw new Error("Unkown type: "+a)}}var st={serialize:Br,deserialize:Fr,stringToBuffer:kt,bufferToString:at};function xt(n,i,a,l){n.executeSql("CREATE TABLE IF NOT EXISTS "+i.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],a,l)}function Gr(n){var i=this,a={db:null};if(n)for(var l in n)a[l]=typeof n[l]!="string"?n[l].toString():n[l];var c=new p(function(f,_){try{a.db=openDatabase(a.name,String(a.version),a.description,a.size)}catch(b){return _(b)}a.db.transaction(function(b){xt(b,a,function(){i._dbInfo=a,f()},function(A,O){_(O)})},_)});return a.serializer=st,c}function ve(n,i,a,l,c,f){n.executeSql(a,l,c,function(_,b){b.code===b.SYNTAX_ERR?_.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[i.storeName],function(A,O){O.rows.length?f(A,b):xt(A,i,function(){A.executeSql(a,l,c,f)},f)},f):f(_,b)},f)}function qr(n,i){var a=this;n=P(n);var l=new p(function(c,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT * FROM "+_.storeName+" WHERE key = ? LIMIT 1",[n],function(A,O){var R=O.rows.length?O.rows.item(0).value:null;R&&(R=_.serializer.deserialize(R)),c(R)},function(A,O){f(O)})})}).catch(f)});return N(l,i),l}function zr(n,i){var a=this,l=new p(function(c,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT * FROM "+_.storeName,[],function(A,O){for(var R=O.rows,x=R.length,q=0;q<x;q++){var V=R.item(q),W=V.value;if(W&&(W=_.serializer.deserialize(W)),W=n(W,V.key,q+1),W!==void 0){c(W);return}}c()},function(A,O){f(O)})})}).catch(f)});return N(l,i),l}function Dt(n,i,a,l){var c=this;n=P(n);var f=new p(function(_,b){c.ready().then(function(){i===void 0&&(i=null);var A=i,O=c._dbInfo;O.serializer.serialize(i,function(R,x){x?b(x):O.db.transaction(function(q){ve(q,O,"INSERT OR REPLACE INTO "+O.storeName+" (key, value) VALUES (?, ?)",[n,R],function(){_(A)},function(V,W){b(W)})},function(q){if(q.code===q.QUOTA_ERR){if(l>0){_(Dt.apply(c,[n,A,a,l-1]));return}b(q)}})})}).catch(b)});return N(f,a),f}function Hr(n,i,a){return Dt.apply(this,[n,i,a,1])}function Wr(n,i){var a=this;n=P(n);var l=new p(function(c,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"DELETE FROM "+_.storeName+" WHERE key = ?",[n],function(){c()},function(A,O){f(O)})})}).catch(f)});return N(l,i),l}function Xr(n){var i=this,a=new p(function(l,c){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"DELETE FROM "+f.storeName,[],function(){l()},function(b,A){c(A)})})}).catch(c)});return N(a,n),a}function Vr(n){var i=this,a=new p(function(l,c){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"SELECT COUNT(key) as c FROM "+f.storeName,[],function(b,A){var O=A.rows.item(0).c;l(O)},function(b,A){c(A)})})}).catch(c)});return N(a,n),a}function Yr(n,i){var a=this,l=new p(function(c,f){a.ready().then(function(){var _=a._dbInfo;_.db.transaction(function(b){ve(b,_,"SELECT key FROM "+_.storeName+" WHERE id = ? LIMIT 1",[n+1],function(A,O){var R=O.rows.length?O.rows.item(0).key:null;c(R)},function(A,O){f(O)})})}).catch(f)});return N(l,i),l}function Kr(n){var i=this,a=new p(function(l,c){i.ready().then(function(){var f=i._dbInfo;f.db.transaction(function(_){ve(_,f,"SELECT key FROM "+f.storeName,[],function(b,A){for(var O=[],R=0;R<A.rows.length;R++)O.push(A.rows.item(R).key);l(O)},function(b,A){c(A)})})}).catch(c)});return N(a,n),a}function Jr(n){return new p(function(i,a){n.transaction(function(l){l.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(c,f){for(var _=[],b=0;b<f.rows.length;b++)_.push(f.rows.item(b).name);i({db:n,storeNames:_})},function(c,f){a(f)})},function(l){a(l)})})}function Qr(n,i){i=T.apply(this,arguments);var a=this.config();n=typeof n!="function"&&n||{},n.name||(n.name=n.name||a.name,n.storeName=n.storeName||a.storeName);var l=this,c;return n.name?c=new p(function(f){var _;n.name===a.name?_=l._dbInfo.db:_=openDatabase(n.name,"","",0),n.storeName?f({db:_,storeNames:[n.storeName]}):f(Jr(_))}).then(function(f){return new p(function(_,b){f.db.transaction(function(A){function O(V){return new p(function(W,ee){A.executeSql("DROP TABLE IF EXISTS "+V,[],function(){W()},function(J,ce){ee(ce)})})}for(var R=[],x=0,q=f.storeNames.length;x<q;x++)R.push(O(f.storeNames[x]));p.all(R).then(function(){_()}).catch(function(V){b(V)})},function(A){b(A)})})}):c=p.reject("Invalid arguments"),N(c,i),c}var Zr={_driver:"webSQLStorage",_initStorage:Gr,_support:Dr(),iterate:zr,getItem:qr,setItem:Hr,removeItem:Wr,clear:Xr,length:Vr,key:Yr,keys:Kr,dropInstance:Qr};function en(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function Ut(n,i){var a=n.name+"/";return n.storeName!==i.storeName&&(a+=n.storeName+"/"),a}function tn(){var n="_localforage_support_test";try{return localStorage.setItem(n,!0),localStorage.removeItem(n),!1}catch{return!0}}function rn(){return!tn()||localStorage.length>0}function nn(n){var i=this,a={};if(n)for(var l in n)a[l]=n[l];return a.keyPrefix=Ut(n,i._defaultConfig),rn()?(i._dbInfo=a,a.serializer=st,p.resolve()):p.reject()}function on(n){var i=this,a=i.ready().then(function(){for(var l=i._dbInfo.keyPrefix,c=localStorage.length-1;c>=0;c--){var f=localStorage.key(c);f.indexOf(l)===0&&localStorage.removeItem(f)}});return N(a,n),a}function an(n,i){var a=this;n=P(n);var l=a.ready().then(function(){var c=a._dbInfo,f=localStorage.getItem(c.keyPrefix+n);return f&&(f=c.serializer.deserialize(f)),f});return N(l,i),l}function sn(n,i){var a=this,l=a.ready().then(function(){for(var c=a._dbInfo,f=c.keyPrefix,_=f.length,b=localStorage.length,A=1,O=0;O<b;O++){var R=localStorage.key(O);if(R.indexOf(f)===0){var x=localStorage.getItem(R);if(x&&(x=c.serializer.deserialize(x)),x=n(x,R.substring(_),A++),x!==void 0)return x}}});return N(l,i),l}function un(n,i){var a=this,l=a.ready().then(function(){var c=a._dbInfo,f;try{f=localStorage.key(n)}catch{f=null}return f&&(f=f.substring(c.keyPrefix.length)),f});return N(l,i),l}function cn(n){var i=this,a=i.ready().then(function(){for(var l=i._dbInfo,c=localStorage.length,f=[],_=0;_<c;_++){var b=localStorage.key(_);b.indexOf(l.keyPrefix)===0&&f.push(b.substring(l.keyPrefix.length))}return f});return N(a,n),a}function ln(n){var i=this,a=i.keys().then(function(l){return l.length});return N(a,n),a}function fn(n,i){var a=this;n=P(n);var l=a.ready().then(function(){var c=a._dbInfo;localStorage.removeItem(c.keyPrefix+n)});return N(l,i),l}function dn(n,i,a){var l=this;n=P(n);var c=l.ready().then(function(){i===void 0&&(i=null);var f=i;return new p(function(_,b){var A=l._dbInfo;A.serializer.serialize(i,function(O,R){if(R)b(R);else try{localStorage.setItem(A.keyPrefix+n,O),_(f)}catch(x){(x.name==="QuotaExceededError"||x.name==="NS_ERROR_DOM_QUOTA_REACHED")&&b(x),b(x)}})})});return N(c,a),c}function hn(n,i){if(i=T.apply(this,arguments),n=typeof n!="function"&&n||{},!n.name){var a=this.config();n.name=n.name||a.name,n.storeName=n.storeName||a.storeName}var l=this,c;return n.name?c=new p(function(f){n.storeName?f(Ut(n,l._defaultConfig)):f(n.name+"/")}).then(function(f){for(var _=localStorage.length-1;_>=0;_--){var b=localStorage.key(_);b.indexOf(f)===0&&localStorage.removeItem(b)}}):c=p.reject("Invalid arguments"),N(c,i),c}var pn={_driver:"localStorageWrapper",_initStorage:nn,_support:en(),iterate:sn,getItem:an,setItem:dn,removeItem:fn,clear:on,length:ln,key:un,keys:cn,dropInstance:hn},vn=function(n,i){return n===i||typeof n=="number"&&typeof i=="number"&&isNaN(n)&&isNaN(i)},mn=function(n,i){for(var a=n.length,l=0;l<a;){if(vn(n[l],i))return!0;l++}return!1},Bt=Array.isArray||function(n){return Object.prototype.toString.call(n)==="[object Array]"},Le={},Ft={},we={INDEXEDDB:xr,WEBSQL:Zr,LOCALSTORAGE:pn},yn=[we.INDEXEDDB._driver,we.WEBSQL._driver,we.LOCALSTORAGE._driver],Ue=["dropInstance"],ut=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ue),gn={description:"",driver:yn.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function _n(n,i){n[i]=function(){var a=arguments;return n.ready().then(function(){return n[i].apply(n,a)})}}function ct(){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var a in i)i.hasOwnProperty(a)&&(Bt(i[a])?arguments[0][a]=i[a].slice():arguments[0][a]=i[a])}return arguments[0]}var En=(function(){function n(i){E(this,n);for(var a in we)if(we.hasOwnProperty(a)){var l=we[a],c=l._driver;this[a]=c,Le[c]||this.defineDriver(l)}this._defaultConfig=ct({},gn),this._config=ct({},this._defaultConfig,i),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return n.prototype.config=function(i){if((typeof i>"u"?"undefined":u(i))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var a in i){if(a==="storeName"&&(i[a]=i[a].replace(/\W/g,"_")),a==="version"&&typeof i[a]!="number")return new Error("Database version must be a number.");this._config[a]=i[a]}return"driver"in i&&i.driver?this.setDriver(this._config.driver):!0}else return typeof i=="string"?this._config[i]:this._config},n.prototype.defineDriver=function(i,a,l){var c=new p(function(f,_){try{var b=i._driver,A=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!i._driver){_(A);return}for(var O=ut.concat("_initStorage"),R=0,x=O.length;R<x;R++){var q=O[R],V=!mn(Ue,q);if((V||i[q])&&typeof i[q]!="function"){_(A);return}}var W=function(){for(var J=function(bn){return function(){var wn=new Error("Method "+bn+" is not implemented by the current driver"),Gt=p.reject(wn);return N(Gt,arguments[arguments.length-1]),Gt}},ce=0,lt=Ue.length;ce<lt;ce++){var ft=Ue[ce];i[ft]||(i[ft]=J(ft))}};W();var ee=function(J){Le[b]&&console.info("Redefining LocalForage driver: "+b),Le[b]=i,Ft[b]=J,f()};"_support"in i?i._support&&typeof i._support=="function"?i._support().then(ee,_):ee(!!i._support):ee(!0)}catch(J){_(J)}});return $(c,a,l),c},n.prototype.driver=function(){return this._driver||null},n.prototype.getDriver=function(i,a,l){var c=Le[i]?p.resolve(Le[i]):p.reject(new Error("Driver not found."));return $(c,a,l),c},n.prototype.getSerializer=function(i){var a=p.resolve(st);return $(a,i),a},n.prototype.ready=function(i){var a=this,l=a._driverSet.then(function(){return a._ready===null&&(a._ready=a._initDriver()),a._ready});return $(l,i,i),l},n.prototype.setDriver=function(i,a,l){var c=this;Bt(i)||(i=[i]);var f=this._getSupportedDrivers(i);function _(){c._config.driver=c.driver()}function b(R){return c._extend(R),_(),c._ready=c._initStorage(c._config),c._ready}function A(R){return function(){var x=0;function q(){for(;x<R.length;){var V=R[x];return x++,c._dbInfo=null,c._ready=null,c.getDriver(V).then(b).catch(q)}_();var W=new Error("No available storage method found.");return c._driverSet=p.reject(W),c._driverSet}return q()}}var O=this._driverSet!==null?this._driverSet.catch(function(){return p.resolve()}):p.resolve();return this._driverSet=O.then(function(){var R=f[0];return c._dbInfo=null,c._ready=null,c.getDriver(R).then(function(x){c._driver=x._driver,_(),c._wrapLibraryMethodsWithReady(),c._initDriver=A(f)})}).catch(function(){_();var R=new Error("No available storage method found.");return c._driverSet=p.reject(R),c._driverSet}),$(this._driverSet,a,l),this._driverSet},n.prototype.supports=function(i){return!!Ft[i]},n.prototype._extend=function(i){ct(this,i)},n.prototype._getSupportedDrivers=function(i){for(var a=[],l=0,c=i.length;l<c;l++){var f=i[l];this.supports(f)&&a.push(f)}return a},n.prototype._wrapLibraryMethodsWithReady=function(){for(var i=0,a=ut.length;i<a;i++)_n(this,ut[i])},n.prototype.createInstance=function(i){return new n(i)},n})(),In=new En;o.exports=In},{3:3}]},{},[4])(4)})}),$i=Nr((e,t)=>{(function(r,o){typeof e=="object"&&typeof t<"u"?o(e):typeof define=="function"&&define.amd?define("localforage-driver-memory",["exports"],o):o(r.LocalforageDriverMemory={})})(typeof self<"u"?self:e,function(r){var o="localforage-driver-memory";function s(m){var w=typeof Symbol=="function"&&m[Symbol.iterator],L=0;return w?w.call(m):{next:function(){return m&&L>=m.length&&(m=void 0),{value:m&&m[L++],done:!m}}}}function u(m,w){m=m||[],w=w||{};try{return new Blob(m,w)}catch(G){if(G.name!=="TypeError")throw G;for(var L=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,C=new L,D=0;D<m.length;D+=1)C.append(m[D]);return C.getBlob(w.type)}}var E=/^~~local_forage_type~([^~]+)~/,h=9,y=h+4,v=Object.prototype.toString;function g(m){var w=m.length*.75,L=m.length;m[m.length-1]==="="&&(w--,m[m.length-2]==="="&&w--);for(var C=new ArrayBuffer(w),D=new Uint8Array(C),G=0,K=0;G<L;G+=4){var ie="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(m[G]),be="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(m[G+1]),ge="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(m[G+2]),$e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".indexOf(m[G+3]);D[K++]=ie<<2|be>>4,D[K++]=(be&15)<<4|ge>>2,D[K++]=(ge&3)<<6|$e&63}return C}function p(m){for(var w=new Uint8Array(m),L="",C=0;C<w.length;C+=3)L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[w[C]>>2],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(w[C]&3)<<4|w[C+1]>>4],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[(w[C+1]&15)<<2|w[C+2]>>6],L+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"[w[C+2]&63];return w.length%3===2?L=L.substring(0,L.length-1)+"=":w.length%3===1&&(L=L.substring(0,L.length-2)+"=="),L}function N(m,w){var L="";if(m&&(L=v.call(m)),m&&(L==="[object ArrayBuffer]"||m.buffer&&v.call(m.buffer)==="[object ArrayBuffer]")){var C=void 0,D="__lfsc__:";m instanceof ArrayBuffer?(C=m,D+="arbf"):(C=m.buffer,L==="[object Int8Array]"?D+="si08":L==="[object Uint8Array]"?D+="ui08":L==="[object Uint8ClampedArray]"?D+="uic8":L==="[object Int16Array]"?D+="si16":L==="[object Uint16Array]"?D+="ur16":L==="[object Int32Array]"?D+="si32":L==="[object Uint32Array]"?D+="ui32":L==="[object Float32Array]"?D+="fl32":L==="[object Float64Array]"?D+="fl64":w(new Error("Failed to get type for BinaryArray"))),w(D+p(C))}else if(L==="[object Blob]"){var G=new FileReader;G.onload=function(){var K="~~local_forage_type~"+m.type+"~"+p(this.result);w("__lfsc__:blob"+K)},G.readAsArrayBuffer(m)}else try{w(JSON.stringify(m))}catch(K){console.error("Couldn't convert value into a JSON string: ",m),w(null,K)}}function $(m){if(m.substring(0,h)!=="__lfsc__:")return JSON.parse(m);var w=m.substring(y),L=m.substring(h,y),C;if(L==="blob"&&E.test(w)){var D=w.match(E);C=D[1],w=w.substring(D[0].length)}var G=g(w);switch(L){case"arbf":return G;case"blob":return u([G],{type:C});case"si08":return new Int8Array(G);case"ui08":return new Uint8Array(G);case"uic8":return new Uint8ClampedArray(G);case"si16":return new Int16Array(G);case"ur16":return new Uint16Array(G);case"si32":return new Int32Array(G);case"ui32":return new Uint32Array(G);case"fl32":return new Float32Array(G);case"fl64":return new Float64Array(G);default:throw new Error("Unkown type: "+L)}}function P(m){var w,L;if(m===null||typeof m!="object"||"isActiveClone"in m)return m;var C=m instanceof Date?new Date(m):m.constructor();try{for(var D=s(Object.keys(m)),G=D.next();!G.done;G=D.next()){var K=G.value;Object.prototype.hasOwnProperty.call(m,K)&&(m.isActiveClone=null,C[K]=P(m[K]),delete m.isActiveClone)}}catch(ie){w={error:ie}}finally{try{G&&!G.done&&(L=D.return)&&L.call(D)}finally{if(w)throw w.error}}return C}function T(m,w){return(m.name||w.name)+"/"+(m.storeName||w.storeName)+"/"}function d(m,w){w&&m.then(function(L){w(null,L)},function(L){w(L)})}function S(){for(var m=[],w=0;w<arguments.length;w++)m[w]=arguments[w];if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}function j(m,w){var L=this;if(w=S.apply(this,arguments),m=typeof m!="function"&&m||{},!m.name){var C=this.config();m.name=m.name||C.name,m.storeName=m.storeName||C.storeName}var D;return m.name?D=new Promise(function(G){m.storeName?G(T(m,L._defaultConfig)):G(m.name+"/")}):D=Promise.reject("Invalid arguments"),{promise:D,callback:w}}function M(m){return typeof m!="string"&&(console.warn(m+" used as a key, but it is not a string."),m=String(m)),m}var F={bufferToString:p,deserialize:$,serialize:N,stringToBuffer:g},I={},B=(function(){function m(w){this.kp=w,this.data={}}return m.resolve=function(w){return I[w]||(I[w]=new m(w)),I[w]},m.prototype.clear=function(){this.data={}},m.prototype.drop=function(){this.clear(),delete I[this.kp]},m.prototype.get=function(w){return this.data[w]},m.prototype.key=function(w){return this.keys()[w]},m.prototype.keys=function(){return Object.keys(this.data)},m.prototype.rm=function(w){delete this.data[w]},m.prototype.set=function(w,L){this.data[w]=L},m})();function k(m){var w=m?P(m):{},L=T(w,this._defaultConfig),C=B.resolve(L);return this._dbInfo=w,this._dbInfo.serializer=F,this._dbInfo.keyPrefix=L,this._dbInfo.mStore=C,Promise.resolve()}function U(m){var w=this,L=this.ready().then(function(){w._dbInfo.mStore.clear()});return d(L,m),L}function H(m,w){var L=j.apply(this,arguments),C=L.promise,D=L.callback,G=C.then(function(K){B.resolve(K).drop()});return d(G,D),C}function Y(m,w){var L=this;m=M(m);var C=this.ready().then(function(){var D=L._dbInfo.mStore.get(m);return D==null?null:L._dbInfo.serializer.deserialize(D)});return d(C,w),C}function Z(m,w){var L=this,C=this.ready().then(function(){for(var D=L._dbInfo.mStore,G=D.keys(),K=0;K<G.length;K++){var ie=D.get(G[K]);if(ie&&(ie=L._dbInfo.serializer.deserialize(ie)),ie=m(ie,G[K],K+1),ie!==void 0)return ie}});return d(C,w),C}function oe(m,w){var L=this,C=this.ready().then(function(){var D;try{D=L._dbInfo.mStore.key(m),D===void 0&&(D=null)}catch{D=null}return D});return d(C,w),C}function ue(m){var w=this,L=this.ready().then(function(){return w._dbInfo.mStore.keys()});return d(L,m),L}function fe(m){var w=this.keys().then(function(L){return L.length});return d(w,m),w}function he(m,w){var L=this;m=M(m);var C=this.ready().then(function(){L._dbInfo.mStore.rm(m)});return d(C,w),C}function ye(m,w,L){var C=this;m=M(m);var D=this.ready().then(function(){w===void 0&&(w=null);var G=w;return new Promise(function(K,ie){C._dbInfo.serializer.serialize(w,function(be,ge){if(ge)ie(ge);else try{C._dbInfo.mStore.set(m,be),K(G)}catch($e){ie($e)}})})});return d(D,L),D}var le=!0;r._support=le,r._driver=o,r._initStorage=k,r.clear=U,r.dropInstance=H,r.getItem=Y,r.iterate=Z,r.key=oe,r.keys=ue,r.length=fe,r.removeItem=he,r.setItem=ye,Object.defineProperty(r,"__esModule",{value:!0})})}),pt=Sr(Si()),or=Sr($i()),Li={display:"none",position:"fixed",top:"0",right:"0",width:"100%",height:"100%",borderRadius:"0",border:"none",zIndex:"2147483647"};function Ti(e){for(let[t,r]of Object.entries(Li))e.style[t]=r}function Mi(e){return!![].slice.call(document.querySelectorAll(".magic-iframe")).find(r=>r.src.includes(e))}var ji=class extends Ii{constructor(){super(...arguments),this.activeElement=null}init(){this.test="hello",this.iframe=new Promise(t=>{let r=()=>{if(Mi(encodeURIComponent(this.parameters)))Uo().log();else{let o=document.createElement("iframe");o.classList.add("magic-iframe"),o.dataset.magicIframeLabel=Ze(this.endpoint).host,o.title="Secure Modal",o.src=Ze(`/send?params=${encodeURIComponent(this.parameters)}`,this.endpoint).href,Ti(o),document.body.appendChild(o),t(o)}};["loaded","interactive","complete"].includes(document.readyState)?r():window.addEventListener("load",r,!1)}),window.addEventListener("message",t=>{var r;if(t.origin===this.endpoint&&t.data&&t.data.msgType&&this.messageHandlers.size){t.data.response=(r=t.data.response)!=null?r:{};for(let o of this.messageHandlers.values())o(t)}})}showOverlay(){return Xe(this,null,function*(){let t=yield this.iframe;t.style.display="block",this.activeElement=document.activeElement,t.focus()})}hideOverlay(){return Xe(this,null,function*(){var t;let r=yield this.iframe;r.style.display="none",(t=this.activeElement)!=null&&t.focus&&this.activeElement.focus(),this.activeElement=null})}_post(t){return Xe(this,null,function*(){let r=yield this.iframe;if(r&&r.contentWindow)r.contentWindow.postMessage(t,this.endpoint);else throw Po()})}},ua=To(Or,{platform:"web",sdkName:"magic-sdk",version:"13.6.2",defaultEndpoint:"https://auth.magic.link/",ViewController:ji,configureStorage:()=>Xe(void 0,null,function*(){let e=pt.default.createInstance({name:"MagicAuthLocalStorageDB",storeName:"MagicAuthLocalStorage"});return yield e.defineDriver(or),yield e.setDriver([pt.default.INDEXEDDB,pt.default.LOCALSTORAGE,or._driver]),e})}),Pi=Object.create,$r=Object.defineProperty,Ci=Object.getOwnPropertyDescriptor,ki=Object.getOwnPropertyNames,xi=Object.getPrototypeOf,Di=Object.prototype.hasOwnProperty,wt=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ui=(e,t,r,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ki(t))!Di.call(e,s)&&s!==r&&$r(e,s,{get:()=>t[s],enumerable:!(o=Ci(t,s))||o.enumerable});return e},Lr=(e,t,r)=>(r=e!=null?Pi(xi(e)):{},Ui(!e||!e.__esModule?$r(r,"default",{value:e,enumerable:!0}):r,e)),xe=(e,t,r)=>new Promise((o,s)=>{var u=y=>{try{h(r.next(y))}catch(v){s(v)}},E=y=>{try{h(r.throw(y))}catch(v){s(v)}},h=y=>y.done?o(y.value):Promise.resolve(y.value).then(u,E);h((r=r.apply(e,t)).next())}),Tr=wt((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o():typeof define=="function"&&define.amd?define([],o):r.CryptoJS=o()})(e,function(){var r=r||(function(o,s){var u=Object.create||(function(){function d(){}return function(S){var j;return d.prototype=S,j=new d,d.prototype=null,j}})(),E={},h=E.lib={},y=h.Base=(function(){return{extend:function(d){var S=u(this);return d&&S.mixIn(d),(!S.hasOwnProperty("init")||this.init===S.init)&&(S.init=function(){S.$super.init.apply(this,arguments)}),S.init.prototype=S,S.$super=this,S},create:function(){var d=this.extend();return d.init.apply(d,arguments),d},init:function(){},mixIn:function(d){for(var S in d)d.hasOwnProperty(S)&&(this[S]=d[S]);d.hasOwnProperty("toString")&&(this.toString=d.toString)},clone:function(){return this.init.prototype.extend(this)}}})(),v=h.WordArray=y.extend({init:function(d,S){d=this.words=d||[],S!=s?this.sigBytes=S:this.sigBytes=d.length*4},toString:function(d){return(d||p).stringify(this)},concat:function(d){var S=this.words,j=d.words,M=this.sigBytes,F=d.sigBytes;if(this.clamp(),M%4)for(var I=0;I<F;I++){var B=j[I>>>2]>>>24-I%4*8&255;S[M+I>>>2]|=B<<24-(M+I)%4*8}else for(var I=0;I<F;I+=4)S[M+I>>>2]=j[I>>>2];return this.sigBytes+=F,this},clamp:function(){var d=this.words,S=this.sigBytes;d[S>>>2]&=4294967295<<32-S%4*8,d.length=o.ceil(S/4)},clone:function(){var d=y.clone.call(this);return d.words=this.words.slice(0),d},random:function(d){for(var S=[],j=function(k){var k=k,U=987654321,H=4294967295;return function(){U=36969*(U&65535)+(U>>16)&H,k=18e3*(k&65535)+(k>>16)&H;var Y=(U<<16)+k&H;return Y/=4294967296,Y+=.5,Y*(o.random()>.5?1:-1)}},M=0,F;M<d;M+=4){var I=j((F||o.random())*4294967296);F=I()*987654071,S.push(I()*4294967296|0)}return new v.init(S,d)}}),g=E.enc={},p=g.Hex={stringify:function(d){for(var S=d.words,j=d.sigBytes,M=[],F=0;F<j;F++){var I=S[F>>>2]>>>24-F%4*8&255;M.push((I>>>4).toString(16)),M.push((I&15).toString(16))}return M.join("")},parse:function(d){for(var S=d.length,j=[],M=0;M<S;M+=2)j[M>>>3]|=parseInt(d.substr(M,2),16)<<24-M%8*4;return new v.init(j,S/2)}},N=g.Latin1={stringify:function(d){for(var S=d.words,j=d.sigBytes,M=[],F=0;F<j;F++){var I=S[F>>>2]>>>24-F%4*8&255;M.push(String.fromCharCode(I))}return M.join("")},parse:function(d){for(var S=d.length,j=[],M=0;M<S;M++)j[M>>>2]|=(d.charCodeAt(M)&255)<<24-M%4*8;return new v.init(j,S)}},$=g.Utf8={stringify:function(d){try{return decodeURIComponent(escape(N.stringify(d)))}catch{throw new Error("Malformed UTF-8 data")}},parse:function(d){return N.parse(unescape(encodeURIComponent(d)))}},P=h.BufferedBlockAlgorithm=y.extend({reset:function(){this._data=new v.init,this._nDataBytes=0},_append:function(d){typeof d=="string"&&(d=$.parse(d)),this._data.concat(d),this._nDataBytes+=d.sigBytes},_process:function(d){var S=this._data,j=S.words,M=S.sigBytes,F=this.blockSize,I=F*4,B=M/I;d?B=o.ceil(B):B=o.max((B|0)-this._minBufferSize,0);var k=B*F,U=o.min(k*4,M);if(k){for(var H=0;H<k;H+=F)this._doProcessBlock(j,H);var Y=j.splice(0,k);S.sigBytes-=U}return new v.init(Y,U)},clone:function(){var d=y.clone.call(this);return d._data=this._data.clone(),d},_minBufferSize:0});h.Hasher=P.extend({cfg:y.extend(),init:function(d){this.cfg=this.cfg.extend(d),this.reset()},reset:function(){P.reset.call(this),this._doReset()},update:function(d){return this._append(d),this._process(),this},finalize:function(d){d&&this._append(d);var S=this._doFinalize();return S},blockSize:16,_createHelper:function(d){return function(S,j){return new d.init(j).finalize(S)}},_createHmacHelper:function(d){return function(S,j){return new T.HMAC.init(d,j).finalize(S)}}});var T=E.algo={};return E})(Math);return r})}),Bi=wt((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Tr()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return(function(o){var s=r,u=s.lib,E=u.WordArray,h=u.Hasher,y=s.algo,v=[],g=[];(function(){function $(S){for(var j=o.sqrt(S),M=2;M<=j;M++)if(!(S%M))return!1;return!0}function P(S){return(S-(S|0))*4294967296|0}for(var T=2,d=0;d<64;)$(T)&&(d<8&&(v[d]=P(o.pow(T,1/2))),g[d]=P(o.pow(T,1/3)),d++),T++})();var p=[],N=y.SHA256=h.extend({_doReset:function(){this._hash=new E.init(v.slice(0))},_doProcessBlock:function($,P){for(var T=this._hash.words,d=T[0],S=T[1],j=T[2],M=T[3],F=T[4],I=T[5],B=T[6],k=T[7],U=0;U<64;U++){if(U<16)p[U]=$[P+U]|0;else{var H=p[U-15],Y=(H<<25|H>>>7)^(H<<14|H>>>18)^H>>>3,Z=p[U-2],oe=(Z<<15|Z>>>17)^(Z<<13|Z>>>19)^Z>>>10;p[U]=Y+p[U-7]+oe+p[U-16]}var ue=F&I^~F&B,fe=d&S^d&j^S&j,he=(d<<30|d>>>2)^(d<<19|d>>>13)^(d<<10|d>>>22),ye=(F<<26|F>>>6)^(F<<21|F>>>11)^(F<<7|F>>>25),le=k+ye+ue+g[U]+p[U],m=he+fe;k=B,B=I,I=F,F=M+le|0,M=j,j=S,S=d,d=le+m|0}T[0]=T[0]+d|0,T[1]=T[1]+S|0,T[2]=T[2]+j|0,T[3]=T[3]+M|0,T[4]=T[4]+F|0,T[5]=T[5]+I|0,T[6]=T[6]+B|0,T[7]=T[7]+k|0},_doFinalize:function(){var $=this._data,P=$.words,T=this._nDataBytes*8,d=$.sigBytes*8;return P[d>>>5]|=128<<24-d%32,P[(d+64>>>9<<4)+14]=o.floor(T/4294967296),P[(d+64>>>9<<4)+15]=T,$.sigBytes=P.length*4,this._process(),this._hash},clone:function(){var $=h.clone.call(this);return $._hash=this._hash.clone(),$}});s.SHA256=h._createHelper(N),s.HmacSHA256=h._createHmacHelper(N)})(Math),r.SHA256})}),Fi=wt((e,t)=>{(function(r,o){typeof e=="object"?t.exports=e=o(Tr()):typeof define=="function"&&define.amd?define(["./core"],o):o(r.CryptoJS)})(e,function(r){return(function(){var o=r,s=o.lib,u=s.WordArray,E=o.enc;E.Base64={stringify:function(y){var v=y.words,g=y.sigBytes,p=this._map;y.clamp();for(var N=[],$=0;$<g;$+=3)for(var P=v[$>>>2]>>>24-$%4*8&255,T=v[$+1>>>2]>>>24-($+1)%4*8&255,d=v[$+2>>>2]>>>24-($+2)%4*8&255,S=P<<16|T<<8|d,j=0;j<4&&$+j*.75<g;j++)N.push(p.charAt(S>>>6*(3-j)&63));var M=p.charAt(64);if(M)for(;N.length%4;)N.push(M);return N.join("")},parse:function(y){var v=y.length,g=this._map,p=this._reverseMap;if(!p){p=this._reverseMap=[];for(var N=0;N<g.length;N++)p[g.charCodeAt(N)]=N}var $=g.charAt(64);if($){var P=y.indexOf($);P!==-1&&(v=P)}return h(y,v,p)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="};function h(y,v,g){for(var p=[],N=0,$=0;$<v;$++)if($%4){var P=g[y.charCodeAt($-1)]<<$%4*2,T=g[y.charCodeAt($)]>>>6-$%4*2;p[N>>>2]|=(P|T)<<24-N%4*8,N++}return u.create(p,N)}})(),r.enc.Base64})}),Gi=(e=>(e.ParseRedirectResult="magic_oauth_parse_redirect_result",e))(Gi||{}),qi=(e=>(e.InvalidRequest="invalid_request",e.InvalidClient="invalid_client",e.InvalidScope="invalid_scope",e.InvalidGrant="invalid_grant",e.UnauthorizedClient="unauthorized_client",e.UnsupportedResponseType="unsupported_response_type",e.UnsupportedGrantType="unsupported_grant_type",e.UnsupportedTokenType="unsupported_token_type",e.AccessDenied="access_denied",e.ServerError="server_error",e.TemporarilyUnavailable="temporarily_unavailable",e))(qi||{}),zi=Lr(Bi()),Hi=Lr(Fi()),ir="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",Mr=typeof window<"u"&&!!window.crypto,Wi=Mr&&!!window.crypto.subtle;function Xi(e){return Array.from(e).map(t=>ir[t%ir.length]).join("")}function ar(e){let t=r=>r.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"");if(e instanceof ArrayBuffer){let r=new Uint8Array(e),o=Array.from(r).map(u=>String.fromCharCode(u)).join(""),s=btoa(o);return t(s)}return t(Hi.default.stringify(e))}function Vi(e){return xe(this,null,function*(){if(Wi){let t=new TextEncoder().encode(e);return crypto.subtle.digest("SHA-256",t).then(ar)}return ar((0,zi.default)(e))})}function sr(e){let t=new Uint8Array(e);if(Mr)window.crypto.getRandomValues(t);else for(let r=0;r<e;r+=1)t[r]=Math.floor(Math.random()*Math.floor(255));return Xi(t)}function Yi(){return xe(this,null,function*(){let e=sr(128),t=sr(128),r=yield Vi(t);return{verifier:t,challenge:r,state:e}})}var ca=class extends Ne.Internal{constructor(){super(...arguments),this.name="oauth",this.config={},this.compat={"magic-sdk":">=2.4.6","@magic-sdk/react-native":!1,"@magic-sdk/react-native-bare":!1,"@magic-sdk/react-native-expo":!1}}loginWithRedirect(e){return this.utils.createPromiEvent(t=>xe(this,null,function*(){let{provider:r,query:o}=yield Ki.call(this,e);window.location.href=new URL(`/v1/oauth2/${r}/start?${o}`,this.sdk.endpoint).href,t()}))}getRedirectResult(){let e=window.location.search,t=window.location.origin+window.location.pathname;return window.history.replaceState(null,"",t),Ji.call(this,e)}},et="oauth_redirect_metadata";function Ki(e){return xe(this,null,function*(){yield this.utils.storage.removeItem(et);let{provider:t,redirectURI:r,scope:o,loginHint:s}=e,{verifier:u,challenge:E,state:h}=yield Yi(),y=JSON.stringify({verifier:u,state:h});return yield this.utils.storage.setItem(et,y),{query:[`magic_api_key=${encodeURIComponent(this.sdk.apiKey)}`,`magic_challenge=${encodeURIComponent(E)}`,`state=${encodeURIComponent(h)}`,`platform=${encodeURIComponent("web")}`,o&&`scope=${encodeURIComponent(o.join(" "))}`,r&&`redirect_uri=${encodeURIComponent(r)}`,s&&`login_hint=${encodeURIComponent(s)}`].reduce((v,g)=>g?`${v}&${g}`:v),provider:t,redirectURI:r}})}function Ji(e){return this.utils.createPromiEvent((t,r)=>xe(this,null,function*(){var o;let s=yield this.utils.storage.getItem(et),{verifier:u,state:E}=JSON.parse(s);this.utils.storage.removeItem(et);let h=this.utils.createJsonRpcRequestPayload("magic_oauth_parse_redirect_result",[e,u,E]),y=yield this.request(h),v=y,g=y;g.error&&r(this.createError(g.error,(o=g.error_description)!=null?o:"An error occurred.",{errorURI:g.error_uri,provider:g.provider})),t(v)}))}export{ca as Y,ua as b};
